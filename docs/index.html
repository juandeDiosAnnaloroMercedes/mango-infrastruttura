<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mango â€” Infrastruttura di fiducia</title>

  <style>
    :root{ --border:#e6e6e6; --text:#111; --muted:#666; --bg:#fff; --soft:#fafafa; --radius:14px; }
    *{ box-sizing:border-box; }
    body{ margin:0; font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif; color:var(--text); background:var(--bg); }
    .wrap{ max-width:900px; margin:0 auto; padding:18px; }
    .card{ border:1px solid var(--border); border-radius:var(--radius); padding:16px; margin:14px 0; background:var(--bg); }
    .soft{ background:var(--soft); }
    h1{ margin:8px 0 4px 0; font-size:1.6rem; }
    h2{ margin:0 0 10px 0; }
    p{ line-height:1.45; margin:10px 0; }
    .small{ font-size:.95rem; color:var(--muted); }
    .row{ display:flex; gap:14px; flex-wrap:wrap; align-items:flex-start; }
    .col{ flex:1 1 320px; }
    .btn{ display:inline-block; padding:12px 14px; border:1px solid var(--border); border-radius:12px; text-decoration:none; color:var(--text); background:#fff; cursor:pointer; font-size:1rem; }
    .btn.primary{ border-color:#111; }
    .btn.ghost{ background:transparent; }
    .actions{ display:flex; gap:10px; flex-wrap:wrap; margin-top:10px; }
    .notice{ padding:12px; border:1px dashed var(--border); border-radius:12px; color:var(--muted); background:#fff; }
    label{ display:block; margin:0 0 6px 0; font-weight:600; }
    textarea{ width:100%; min-height:86px; padding:12px; border:1px solid var(--border); border-radius:12px; font-size:1rem; }
    .qr{ width:180px; max-width:100%; border:1px solid var(--border); border-radius:12px; padding:10px; background:#fff; }
    .langbar{ display:flex; gap:8px; flex-wrap:wrap; margin:10px 0 0 0; }
    .langbar a{ font-size:.95rem; padding:8px 10px; border:1px solid var(--border); border-radius:999px; text-decoration:none; color:var(--text); background:#fff; }
    .anchor{ scroll-margin-top: 14px; }
    hr{ border:none; border-top:1px solid var(--border); margin:14px 0; }
    ol{ padding-left:18px; margin:10px 0; }
    ul{ padding-left:18px; margin:10px 0; }
  </style>
</head>

<body id="top">
  <div class="wrap">

    <!-- HEADER (contiene SOLO struttura, testo dentro data-lang) -->
    <header class="card soft">
      <h1>Mango ğŸ¥­</h1>

      <div class="langbar">
        <a href="index.html?lang=it">IT</a>
        <a href="index.html?lang=en">EN</a>
        <a href="index.html?lang=es">ES</a>
        <a href="index.html?lang=fr">FR</a>
        <a href="index.html?lang=de">DE</a>
        <a href="index.html?lang=zh">ZH</a>
      </div>

      <!-- TESTO HEADER (tutto tradotto) -->
      <div data-lang="it">
        <p class="small">Progetto nato il <b>02 febbraio 2026</b>. Mango non Ã¨ moneta e non Ã¨ accumulabile.</p>
        <div class="notice">QR ufficiale unico: punta alla home stabile. Stampalo e usalo nel mondo reale.</div>
      </div>

      <div data-lang="en">
        <p class="small">Project born on <b>02 February 2026</b>. Mango is not money and cannot be accumulated.</p>
        <div class="notice">Single official QR: it points to the stable home. Print it and use it in the real world.</div>
      </div>

      <div data-lang="es">
        <p class="small">Proyecto nacido el <b>02 febrero 2026</b>. Mango no es dinero y no es acumulable.</p>
        <div class="notice">QR oficial Ãºnico: apunta a la home estable. ImprÃ­melo y Ãºsalo en el mundo real.</div>
      </div>

      <div data-lang="fr">
        <p class="small">Projet nÃ© le <b>02 fÃ©vrier 2026</b>. Mango nâ€™est pas une monnaie et ne sâ€™accumule pas.</p>
        <div class="notice">QR officiel unique : il pointe vers lâ€™accueil stable. Imprime-le et utilise-le dans le monde rÃ©el.</div>
      </div>

      <div data-lang="de">
        <p class="small">Projektstart <b>02. Februar 2026</b>. Mango ist kein Geld und nicht ansammelbar.</p>
        <div class="notice">Einziger offizieller QR: fÃ¼hrt zur stabilen Startseite. Druck ihn und nutze ihn in der RealitÃ¤t.</div>
      </div>

      <div data-lang="zh">
        <p class="small">é¡¹ç›®è¯ç”Ÿäº <b>2026å¹´2æœˆ2æ—¥</b>ã€‚Mango ä¸æ˜¯è´§å¸ï¼Œä¸èƒ½ç´¯ç§¯ã€‚</p>
        <div class="notice">å”¯ä¸€å®˜æ–¹äºŒç»´ç ï¼šæŒ‡å‘ç¨³å®šä¸»é¡µã€‚æ‰“å°å¹¶åœ¨ç°å®ä¸­ä½¿ç”¨ã€‚</div>
      </div>

      <div class="actions">
        <a class="btn primary" href="#fai-mango-adesso" data-i18n="cta_do">Fai Mango adesso</a>
        <a class="btn" href="#scrivi-una-riga" data-i18n="cta_row">Scrivi una riga</a>
        <a class="btn" href="#cose-mango" data-i18n="cta_what">Cosâ€™Ã¨ Mango</a>
      </div>

      <div class="row" style="margin-top:12px;">
        <div class="col">
          <div data-lang="it"><p class="small">QR stabile (home): juandediosannaloromercedes.github.io/mango-infrastruttura/</p></div>
          <div data-lang="en"><p class="small">Stable QR (home): juandediosannaloromercedes.github.io/mango-infrastruttura/</p></div>
          <div data-lang="es"><p class="small">QR estable (home): juandediosannaloromercedes.github.io/mango-infrastruttura/</p></div>
          <div data-lang="fr"><p class="small">QR stable (accueil) : juandediosannaloromercedes.github.io/mango-infrastruttura/</p></div>
          <div data-lang="de"><p class="small">Stabiler QR (Startseite): juandediosannaloromercedes.github.io/mango-infrastruttura/</p></div>
          <div data-lang="zh"><p class="small">ç¨³å®šä¸»é¡µäºŒç»´ç ï¼šjuandediosannaloromercedes.github.io/mango-infrastruttura/</p></div>
        </div>

        <div class="col" style="max-width:260px;">
          <div data-lang="it" class="small" style="margin-bottom:6px;">QR Home (stabile)</div>
          <div data-lang="en" class="small" style="margin-bottom:6px;">Home QR (stable)</div>
          <div data-lang="es" class="small" style="margin-bottom:6px;">QR Home (estable)</div>
          <div data-lang="fr" class="small" style="margin-bottom:6px;">QR Accueil (stable)</div>
          <div data-lang="de" class="small" style="margin-bottom:6px;">QR Startseite (stabil)</div>
          <div data-lang="zh" class="small" style="margin-bottom:6px;">ä¸»é¡µäºŒç»´ç ï¼ˆç¨³å®šï¼‰</div>

          <!-- UN SOLO QR -->
          <img class="qr" src="assets/qr-home.png" alt="QR Mango â€” Home" />
        </div>
      </div>
    </header>

    <!-- SEZIONE 1 -->
    <section class="card anchor" id="fai-mango-adesso">
      <div class="actions" style="margin-top:0;"><a class="btn ghost" href="#top" data-i18n="back">â† Torna alla home</a></div>

      <div data-lang="it">
        <h2>Fai Mango adesso</h2>
        <p>Fai uno scambio reale: un gesto, un aiuto, una cura, una presenza. Mango Ã¨ riconoscimento, non valore.</p>
        <div class="actions">
          <a class="btn primary" href="#primo-scambio">Vai al primo scambio</a>
          <a class="btn" href="#scrivi-una-riga">Vai a â€œScrivi una rigaâ€</a>
        </div>
      </div>

      <div data-lang="en">
        <h2>Do Mango now</h2>
        <p>Do a real exchange: a gesture, help, care, presence. Mango is recognition, not value.</p>
        <div class="actions">
          <a class="btn primary" href="#primo-scambio">Go to first exchange</a>
          <a class="btn" href="#scrivi-una-riga">Go to â€œWrite one rowâ€</a>
        </div>
      </div>

      <div data-lang="es">
        <h2>Haz Mango ahora</h2>
        <p>Haz un intercambio real: un gesto, ayuda, cuidado, presencia. Mango es reconocimiento, no valor.</p>
        <div class="actions">
          <a class="btn primary" href="#primo-scambio">Ir al primer intercambio</a>
          <a class="btn" href="#scrivi-una-riga">Ir a â€œEscribe una lÃ­neaâ€</a>
        </div>
      </div>

      <div data-lang="fr">
        <h2>Fais Mango maintenant</h2>
        <p>Fais un Ã©change rÃ©el : un geste, une aide, une attention, une prÃ©sence. Mango = reconnaissance, pas valeur.</p>
        <div class="actions">
          <a class="btn primary" href="#primo-scambio">Aller au premier Ã©change</a>
          <a class="btn" href="#scrivi-una-riga">Aller Ã  â€œÃ‰cris une ligneâ€</a>
        </div>
      </div>

      <div data-lang="de">
        <h2>Mach Mango jetzt</h2>
        <p>Mach einen echten Austausch: eine Geste, Hilfe, FÃ¼rsorge, PrÃ¤senz. Mango ist Anerkennung, kein Wert.</p>
        <div class="actions">
          <a class="btn primary" href="#primo-scambio">Zum ersten Austausch</a>
          <a class="btn" href="#scrivi-una-riga">Zu â€œSchreib eine Zeileâ€</a>
        </div>
      </div>

      <div data-lang="zh">
        <h2>ç°åœ¨åš Mango</h2>
        <p>åšä¸€æ¬¡çœŸå®äº¤æ¢ï¼šä¸€ä¸ªä¸¾åŠ¨ã€å¸®åŠ©ã€ç…§æ–™ã€é™ªä¼´ã€‚Mango æ˜¯è®¤å¯ï¼Œä¸æ˜¯ä»·å€¼ã€‚</p>
        <div class="actions">
          <a class="btn primary" href="#primo-scambio">å»â€œç¬¬ä¸€æ¬¡äº¤æ¢â€</a>
          <a class="btn" href="#scrivi-una-riga">å»â€œå†™ä¸€è¡Œâ€</a>
        </div>
      </div>
    </section>

    <!-- PRIMO SCAMBIO -->
    <section class="card anchor" id="primo-scambio">
      <div class="actions" style="margin-top:0;"><a class="btn ghost" href="#top" data-i18n="back">â† Torna alla home</a></div>

      <div data-lang="it">
        <h2>Primo scambio</h2>
        <ol>
          <li>Fai un gesto reale (aiuto, cura, scambio).</li>
          <li>Scrivi una riga (sezione â€œScrivi una rigaâ€).</li>
          <li>Fine: Mango vive nel reale, non nel conteggio.</li>
        </ol>
        <div class="actions"><a class="btn primary" href="#scrivi-una-riga">Scrivi una riga adesso</a></div>
      </div>

      <div data-lang="en">
        <h2>First exchange</h2>
        <ol>
          <li>Do a real gesture (help, care, exchange).</li>
          <li>Write one row (â€œWrite one rowâ€).</li>
          <li>Done: Mango lives in reality, not in counting.</li>
        </ol>
        <div class="actions"><a class="btn primary" href="#scrivi-una-riga">Write a row now</a></div>
      </div>

      <div data-lang="es">
        <h2>Primer intercambio</h2>
        <ol>
          <li>Haz un gesto real (ayuda, cuidado, intercambio).</li>
          <li>Escribe una lÃ­nea (â€œEscribe una lÃ­neaâ€).</li>
          <li>Listo: Mango vive en lo real, no en contar.</li>
        </ol>
        <div class="actions"><a class="btn primary" href="#scrivi-una-riga">Escribe una lÃ­nea ahora</a></div>
      </div>

      <div data-lang="fr">
        <h2>Premier Ã©change</h2>
        <ol>
          <li>Fais un geste rÃ©el (aide, soin, Ã©change).</li>
          <li>Ã‰cris une ligne (â€œÃ‰cris une ligneâ€).</li>
          <li>Câ€™est tout : Mango vit dans le rÃ©el, pas dans le comptage.</li>
        </ol>
        <div class="actions"><a class="btn primary" href="#scrivi-una-riga">Ã‰cris une ligne maintenant</a></div>
      </div>

      <div data-lang="de">
        <h2>Erster Austausch</h2>
        <ol>
          <li>Mach eine echte Geste (Hilfe, FÃ¼rsorge, Austausch).</li>
          <li>Schreib eine Zeile (â€œSchreib eine Zeileâ€).</li>
          <li>Fertig: Mango lebt in der RealitÃ¤t, nicht im ZÃ¤hlen.</li>
        </ol>
        <div class="actions"><a class="btn primary" href="#scrivi-una-riga">Jetzt eine Zeile schreiben</a></div>
      </div>

      <div data-lang="zh">
        <h2>ç¬¬ä¸€æ¬¡äº¤æ¢</h2>
        <ol>
          <li>åšä¸€ä¸ªçœŸå®çš„ä¸¾åŠ¨ï¼ˆå¸®åŠ©ã€ç…§æ–™ã€äº¤æ¢ï¼‰ã€‚</li>
          <li>å†™ä¸€è¡Œï¼ˆâ€œå†™ä¸€è¡Œâ€ï¼‰ã€‚</li>
          <li>å®Œæˆï¼šMango æ´»åœ¨ç°å®é‡Œï¼Œä¸åœ¨è®¡æ•°é‡Œã€‚</li>
        </ol>
        <div class="actions"><a class="btn primary" href="#scrivi-una-riga">ç°åœ¨å†™ä¸€è¡Œ</a></div>
      </div>
    </section>

    <!-- SCRIVI UNA RIGA -->
    <section class="card anchor" id="scrivi-una-riga">
      <div class="actions" style="margin-top:0;"><a class="btn ghost" href="#top" data-i18n="back">â† Torna alla home</a></div>

      <!-- Tutto il testo della sezione Ã¨ tradotto -->
      <div data-lang="it">
        <h2>Scrivi una riga</h2>
        <div class="notice"><b>Nota:</b> la riga resta visibile <b>solo su questo dispositivo</b>. Mango non accumula e non fa bacheche.</div>
        <form id="mangoRowForm" style="margin-top:12px;">
          <label for="mangoRowInput">La tua riga</label>
          <textarea id="mangoRowInput" placeholder="Esempio: Oggi ho aiutato X / Oggi Y ha aiutato me."></textarea>
          <div class="actions">
            <button class="btn primary" type="submit">Salva sul dispositivo</button>
            <button class="btn" type="button" id="mangoRowClearInput">Svuota</button>
          </div>
        </form>
      </div>

      <div data-lang="en">
        <h2>Write one row</h2>
        <div class="notice"><b>Note:</b> the row stays visible <b>only on this device</b>. Mango doesnâ€™t accumulate and isnâ€™t a public feed.</div>
        <form id="mangoRowForm_en" style="margin-top:12px;">
          <label for="mangoRowInput">Your row</label>
          <textarea id="mangoRowInput_en" placeholder="Example: Today I helped X / Today Y helped me."></textarea>
          <div class="actions">
            <button class="btn primary" type="submit">Save on this device</button>
            <button class="btn" type="button" id="mangoRowClearInput_en">Clear</button>
          </div>
        </form>
      </div>

      <div data-lang="es">
        <h2>Escribe una lÃ­nea</h2>
        <div class="notice"><b>Nota:</b> la lÃ­nea queda visible <b>solo en este dispositivo</b>. Mango no acumula ni es un muro pÃºblico.</div>
        <form id="mangoRowForm_es" style="margin-top:12px;">
          <label for="mangoRowInput_es">Tu lÃ­nea</label>
          <textarea id="mangoRowInput_es" placeholder="Ejemplo: Hoy ayudÃ© a X / Hoy Y me ayudÃ³."></textarea>
          <div class="actions">
            <button class="btn primary" type="submit">Guardar en este dispositivo</button>
            <button class="btn" type="button" id="mangoRowClearInput_es">Borrar</button>
          </div>
        </form>
      </div>

      <div data-lang="fr">
        <h2>Ã‰cris une ligne</h2>
        <div class="notice"><b>Note :</b> la ligne reste visible <b>uniquement sur cet appareil</b>. Mango nâ€™accumule pas et nâ€™est pas un fil public.</div>
        <form id="mangoRowForm_fr" style="margin-top:12px;">
          <label for="mangoRowInput_fr">Ta ligne</label>
          <textarea id="mangoRowInput_fr" placeholder="Exemple : Aujourdâ€™hui jâ€™ai aidÃ© X / Aujourdâ€™hui Y mâ€™a aidÃ©."></textarea>
          <div class="actions">
            <button class="btn primary" type="submit">Enregistrer sur cet appareil</button>
            <button class="btn" type="button" id="mangoRowClearInput_fr">Effacer</button>
          </div>
        </form>
      </div>

      <div data-lang="de">
        <h2>Schreib eine Zeile</h2>
        <div class="notice"><b>Hinweis:</b> die Zeile bleibt <b>nur auf diesem GerÃ¤t</b> sichtbar. Mango sammelt nicht und ist kein Ã¶ffentlicher Feed.</div>
        <form id="mangoRowForm_de" style="margin-top:12px;">
          <label for="mangoRowInput_de">Deine Zeile</label>
          <textarea id="mangoRowInput_de" placeholder="Beispiel: Heute habe ich X geholfen / Heute hat Y mir geholfen."></textarea>
          <div class="actions">
            <button class="btn primary" type="submit">Auf diesem GerÃ¤t speichern</button>
            <button class="btn" type="button" id="mangoRowClearInput_de">Leeren</button>
          </div>
        </form>
      </div>

      <div data-lang="zh">
        <h2>å†™ä¸€è¡Œ</h2>
        <div class="notice"><b>æç¤ºï¼š</b>è¿™è¡Œæ–‡å­—åªä¼šä¿å­˜åœ¨<b>æœ¬è®¾å¤‡</b>ä¸Šæ˜¾ç¤ºã€‚Mango ä¸ç´¯ç§¯ï¼Œä¹Ÿä¸æ˜¯å…¬å¼€ä¿¡æ¯æµã€‚</div>
        <form id="mangoRowForm_zh" style="margin-top:12px;">
          <label for="mangoRowInput_zh">ä½ çš„ä¸€è¡Œ</label>
          <textarea id="mangoRowInput_zh" placeholder="ä¾‹ï¼šä»Šå¤©æˆ‘å¸®åŠ©äº†X / ä»Šå¤©Yå¸®åŠ©äº†æˆ‘ã€‚"></textarea>
          <div class="actions">
            <button class="btn primary" type="submit">ä¿å­˜åˆ°æœ¬è®¾å¤‡</button>
            <button class="btn" type="button" id="mangoRowClearInput_zh">æ¸…ç©º</button>
          </div>
        </form>
      </div>

      <!-- Box salvata (comune, testo tradotto) -->
      <div id="mangoRowSavedBox" class="card soft" style="display:none; margin-top:14px;">
        <div id="savedLabel" class="small">Riga salvata (solo qui):</div>
        <div id="mangoRowSavedText" style="margin-top:8px; white-space:pre-wrap;"></div>
        <div class="actions">
          <button class="btn" type="button" id="mangoRowRemove">Togli</button>
        </div>
      </div>
    </section>
330  </section>

     â† QUI INCOLLA TUTTO IL BLOCCO ORIGINE REALE

332  <!-- COS'Ãˆ MANGO -->
333  <section class="card anchor" id="cose-mango">
    <!-- COS'Ãˆ MANGO -->
    <section class="card anchor" id="cose-mango">
      <div class="actions" style="margin-top:0;"><a class="btn ghost" href="#top" data-i18n="back">â† Torna alla home</a></div>

      <div data-lang="it">
        <h2>Cosâ€™Ã¨ Mango</h2>
        <p>Mango Ã¨ unâ€™infrastruttura di fiducia locale non monetaria, non appropriabile, progettata per evitare accumulo, speculazione e cattura istituzionale.</p>
        <p class="small">Una riga = riconoscimento di uno scambio reale. Niente numeri, niente valore, niente conti.</p>
        <p class="small">Â© Mango â€” Juan de Dios Annaloro Mercedes (in memoria di Larimar).</p>
      </div>

      <div data-lang="en">
        <h2>What is Mango</h2>
        <p>Mango is a local trust infrastructure: non-monetary, non-appropriable, designed to prevent accumulation, speculation, and institutional capture.</p>
        <p class="small">One row = recognition of a real exchange. No numbers, no value, no accounts.</p>
        <p class="small">Â© Mango â€” Juan de Dios Annaloro Mercedes (in memory of Larimar).</p>
      </div>

      <div data-lang="es">
        <h2>Â¿QuÃ© es Mango?</h2>
        <p>Mango es una infraestructura local de confianza: no monetaria, no apropiable, diseÃ±ada para evitar acumulaciÃ³n, especulaciÃ³n y captura institucional.</p>
        <p class="small">Una lÃ­nea = reconocimiento de un intercambio real. Sin nÃºmeros, sin valor, sin cuentas.</p>
        <p class="small">Â© Mango â€” Juan de Dios Annaloro Mercedes (en memoria de Larimar).</p>
      </div>

      <div data-lang="fr">
        <h2>Quâ€™est-ce que Mango</h2>
        <p>Mango est une infrastructure locale de confiance : non monÃ©taire, non appropriable, conÃ§ue pour Ã©viter lâ€™accumulation, la spÃ©culation et la capture institutionnelle.</p>
        <p class="small">Une ligne = reconnaissance dâ€™un Ã©change rÃ©el. Pas de chiffres, pas de valeur, pas de comptes.</p>
        <p class="small">Â© Mango â€” Juan de Dios Annaloro Mercedes (en mÃ©moire de Larimar).</p>
      </div>

      <div data-lang="de">
        <h2>Was ist Mango</h2>
        <p>Mango ist eine lokale Vertrauens-Infrastruktur: nicht-monetÃ¤r, nicht-aneignbar, entwickelt gegen Ansammlung, Spekulation und institutionelle Vereinnahmung.</p>
        <p class="small">Eine Zeile = Anerkennung eines realen Austauschs. Keine Zahlen, kein Wert, keine Konten.</p>
        <p class="small">Â© Mango â€” Juan de Dios Annaloro Mercedes (im Gedenken an Larimar).</p>
      </div>

      <div data-lang="zh">
        <h2>Mango æ˜¯ä»€ä¹ˆ</h2>
        <p>Mango æ˜¯ä¸€ç§æœ¬åœ°ä¿¡ä»»åŸºç¡€è®¾æ–½ï¼šéè´§å¸ã€ä¸å¯å æœ‰ï¼Œæ—¨åœ¨é¿å…ç´¯ç§¯ã€æŠ•æœºä¸åˆ¶åº¦æ€§æ•è·ã€‚</p>
        <p class="small">ä¸€è¡Œ = å¯¹çœŸå®äº¤æ¢çš„è®¤å¯ã€‚ä¸ç”¨æ•°å­—ã€ä¸è®¾ä»·å€¼ã€ä¸åšè´¦æˆ·ã€‚</p>
        <p class="small">Â© Mango â€” Juan de Dios Annaloro Mercedesï¼ˆçºªå¿µ Larimarï¼‰ã€‚</p>
      </div>
    </section>

    <footer class="small" style="padding:14px 0 40px 0;">
      <span data-lang="it">Â© Mango â€” Juan de Dios Annaloro Mercedes (in memoria di Larimar).</span>
      <span data-lang="en">Â© Mango â€” Juan de Dios Annaloro Mercedes (in memory of Larimar).</span>
      <span data-lang="es">Â© Mango â€” Juan de Dios Annaloro Mercedes (en memoria de Larimar).</span>
      <span data-lang="fr">Â© Mango â€” Juan de Dios Annaloro Mercedes (en mÃ©moire de Larimar).</span>
      <span data-lang="de">Â© Mango â€” Juan de Dios Annaloro Mercedes (im Gedenken an Larimar).</span>
      <span data-lang="zh">Â© Mango â€” Juan de Dios Annaloro Mercedesï¼ˆçºªå¿µ Larimarï¼‰ã€‚</span>
    </footer>

  </div>

  <script>
    (function(){
      const SUPPORTED = ["it","en","es","fr","de","zh"];
      const DEFAULT_LANG = "it";
      const STORAGE_KEY = "mango_riga_v1";

      function getLang(){
        const p = new URLSearchParams(location.search);
        const q = (p.get("lang") || "").toLowerCase();
        return SUPPORTED.includes(q) ? q : DEFAULT_LANG;
      }

      function applyI18n(lang){
        document.querySelectorAll("[data-lang]").forEach(el=>{
          el.style.display = (el.getAttribute("data-lang") === lang) ? "" : "none";
        });

        // aggiorna CTA e "torna" senza testi fissi fuori dai blocchi
        const map = {
          it: { back:"â† Torna alla home", cta_do:"Fai Mango adesso", cta_row:"Scrivi una riga", cta_what:"Cosâ€™Ã¨ Mango",
                savedLabel:"Riga salvata (solo qui):", remove:"Togli" },
          en: { back:"â† Back to home", cta_do:"Do Mango now", cta_row:"Write one row", cta_what:"What is Mango",
                savedLabel:"Saved row (only here):", remove:"Remove" },
          es: { back:"â† Volver a inicio", cta_do:"Haz Mango ahora", cta_row:"Escribe una lÃ­nea", cta_what:"Â¿QuÃ© es Mango?",
                savedLabel:"LÃ­nea guardada (solo aquÃ­):", remove:"Quitar" },
          fr: { back:"â† Retour Ã  lâ€™accueil", cta_do:"Fais Mango maintenant", cta_row:"Ã‰cris une ligne", cta_what:"Quâ€™est-ce que Mango",
                savedLabel:"Ligne enregistrÃ©e (ici seulement) :", remove:"Retirer" },
          de: { back:"â† Zur Startseite", cta_do:"Mach Mango jetzt", cta_row:"Schreib eine Zeile", cta_what:"Was ist Mango",
                savedLabel:"Gespeicherte Zeile (nur hier):", remove:"Entfernen" },
          zh: { back:"â† è¿”å›ä¸»é¡µ", cta_do:"ç°åœ¨åš Mango", cta_row:"å†™ä¸€è¡Œ", cta_what:"Mango æ˜¯ä»€ä¹ˆ",
                savedLabel:"å·²ä¿å­˜çš„ä¸€è¡Œï¼ˆä»…æ­¤è®¾å¤‡ï¼‰ï¼š", remove:"åˆ é™¤" }
        }[lang];

        document.querySelectorAll('[data-i18n="back"]').forEach(a=>a.textContent = map.back);
        document.querySelectorAll('[data-i18n="cta_do"]').forEach(a=>a.textContent = map.cta_do);
        document.querySelectorAll('[data-i18n="cta_row"]').forEach(a=>a.textContent = map.cta_row);
        document.querySelectorAll('[data-i18n="cta_what"]').forEach(a=>a.textContent = map.cta_what);

        const savedLabel = document.getElementById("savedLabel");
        if(savedLabel) savedLabel.textContent = map.savedLabel;
        const removeBtn = document.getElementById("mangoRowRemove");
        if(removeBtn) removeBtn.textContent = map.remove;
      }

      // Riga persistente: usiamo UNA sola riga comune (stesso STORAGE_KEY),
      // ma form/input diversi per lingua. Scrive sempre nello stesso posto.
      function setupLocalRow(){
        const savedBox = document.getElementById("mangoRowSavedBox");
        const savedText = document.getElementById("mangoRowSavedText");
        const btnRemove = document.getElementById("mangoRowRemove");

        function render(){
          const saved = localStorage.getItem(STORAGE_KEY);
          if(saved && saved.trim()){
            savedText.textContent = saved;
            savedBox.style.display = "block";
          }else{
            savedText.textContent = "";
            savedBox.style.display = "none";
          }
        }

        function bind(formId, inputId, clearId){
          const form = document.getElementById(formId);
          const input = document.getElementById(inputId);
          const clear = document.getElementById(clearId);
          if(!form || !input) return;

          form.addEventListener("submit", (e)=>{
            e.preventDefault();
            const val = (input.value || "").trim();
            if(!val) return;
            localStorage.setItem(STORAGE_KEY, val);
            render();
          });

          if(clear){
            clear.addEventListener("click", ()=>{
              input.value = "";
              input.focus();
            });
          }
        }

        btnRemove.addEventListener("click", ()=>{
          localStorage.removeItem(STORAGE_KEY);
          render();
        });

        // lega tutti i form delle lingue
        bind("mangoRowForm","mangoRowInput","mangoRowClearInput");
        bind("mangoRowForm_en","mangoRowInput_en","mangoRowClearInput_en");
        bind("mangoRowForm_es","mangoRowInput_es","mangoRowClearInput_es");
        bind("mangoRowForm_fr","mangoRowInput_fr","mangoRowClearInput_fr");
        bind("mangoRowForm_de","mangoRowInput_de","mangoRowClearInput_de");
        bind("mangoRowForm_zh","mangoRowInput_zh","mangoRowClearInput_zh");

        render();
      }

      const lang = getLang();
      applyI18n(lang);
      setupLocalRow();
    })();
  </script>
</body>
</html>
