<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light">
  <title>Mango ‚Äî Infrastruttura di fiducia locale</title>

  <style>
    :root{
      --bg:#ffffff; --fg:#111111; --muted:#6b7280;
      --card:#f6f7f9; --border:#e5e7eb; --shadow:0 10px 30px rgba(0,0,0,.06);
      --r:18px; --max:860px; --p:18px;
      --font:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{margin:0;font-family:var(--font);background:var(--bg);color:var(--fg)}
    a,a:visited{color:inherit;text-decoration:none}
    header{
      position:sticky;top:0;z-index:10;
      background:rgba(255,255,255,.92);
      backdrop-filter:blur(8px);
      border-bottom:1px solid var(--border);
    }
    .hwrap{
      max-width:var(--max);margin:0 auto;padding:14px var(--p);
      display:flex;justify-content:space-between;align-items:center;gap:12px;
    }
    .brand{font-weight:900;font-size:22px;display:flex;gap:10px;align-items:center;line-height:1}
    .brand .mango{
      display:inline-flex;align-items:center;justify-content:center;
      width:34px;height:34px;border-radius:999px;border:1px solid var(--border);
      background:#fff;cursor:pointer;user-select:none
    }
    .lang{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end}
    .chip{
      border:1px solid var(--border);background:#fff;border-radius:999px;
      padding:10px 14px;font-weight:900;font-size:14px;cursor:pointer;
    }
    .chip[aria-current="true"]{outline:2px solid #111;outline-offset:2px}

    .wrap{max-width:var(--max);margin:0 auto;padding:22px var(--p) 42px}
    h1{margin:0;font-size:22px;line-height:1.2}
    p{color:var(--muted);line-height:1.55}
    .grid{display:grid;grid-template-columns:1fr;gap:14px;margin-top:18px}
    .card{
      background:var(--card);border:1px solid var(--border);border-radius:var(--r);
      padding:16px;box-shadow:var(--shadow);
    }
    .card h2{margin:0 0 10px;font-size:18px;color:#111}
    .card h3{margin:14px 0 8px;font-size:16px;color:#111}
    .card p,.card li{color:#1f2937;font-size:15px;line-height:1.55}
    ul{margin:10px 0 0 18px}
    hr{border:0;border-top:1px solid var(--border);margin:14px 0}

    .btnrow{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .btn{
      border:0;background:#111;color:#fff;padding:12px 14px;border-radius:14px;
      font-weight:950;cursor:pointer;display:inline-flex;align-items:center;gap:8px;
    }
    .btn.secondary{background:#fff;color:#111;border:1px solid var(--border)}
    .btn:active{transform:scale(.99)}
    .small{font-size:13px;color:var(--muted)}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:13px}
    .eq{font-weight:950;font-size:18px;color:#111;margin:10px 0 0}

    textarea{
      width:100%; min-height:110px; resize:vertical; padding:14px;
      border-radius:16px; border:1px solid var(--border); background:#fff;
      font-family:var(--font); font-size:16px; line-height:1.5; outline:none;
    }
    textarea:focus{outline:2px solid rgba(17,17,17,.35);outline-offset:2px}

    .notice{
      display:none;margin-top:10px;padding:12px 14px;border-radius:14px;
      border:1px solid var(--border);background:#fff;color:#111;box-shadow:var(--shadow);
    }

    /* Local register list */
    .list{margin-top:10px;display:flex;flex-direction:column;gap:10px}
    .item{
      background:#fff;border:1px solid var(--border);border-radius:16px;
      padding:12px 12px;box-shadow:var(--shadow);
    }
    .itemTop{display:flex;justify-content:space-between;gap:10px;align-items:flex-start}
    .itemMeta{color:var(--muted);font-size:12px;line-height:1.3}
    .itemText{margin-top:8px;color:#111;font-size:15px;line-height:1.55;white-space:pre-wrap}
    .itemBtns{display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-end}
    .mini{
      border:1px solid var(--border);background:#fff;color:#111;border-radius:999px;
      padding:8px 10px;font-weight:900;font-size:13px;cursor:pointer;
    }

    .footer{
      margin-top:22px;padding-top:18px;border-top:1px solid var(--border);
      color:var(--muted);font-size:14px;line-height:1.5;
    }
  </style>
</head>

<body>
<header id="top">
  <div class="hwrap">
    <div class="brand">
      <span>Mango</span>
      <button class="mango" id="brand_mango" type="button" aria-label="Top">ü•≠</button>
    </div>

    <nav class="lang" aria-label="Languages">
      <button class="chip" data-lang="it">IT</button>
      <button class="chip" data-lang="en">EN</button>
      <button class="chip" data-lang="es">ES</button>
      <button class="chip" data-lang="fr">FR</button>
      <button class="chip" data-lang="de">DE</button>
      <button class="chip" data-lang="zh">‰∏≠Êñá</button>
    </nav>
  </div>
</header>

<main class="wrap">
  <section>
    <h1 id="t_title"></h1>
    <p id="t_subtitle"></p>
  </section>

  <section class="grid">

    <!-- DO -->
    <article class="card" id="do">
      <h2 id="t_do_title"></h2>
      <p id="t_do_text"></p>
      <div class="btnrow">
        <button class="btn" id="btn_first" type="button">‚úçÔ∏è <span id="t_btn_first"></span></button>
        <button class="btn secondary" id="btn_about" type="button">üìò <span id="t_btn_about"></span></button>
      </div>
      <p class="small" id="t_do_note"></p>
    </article>

    <!-- WRITE GUIDE -->
    <article class="card" id="write">
      <h2 id="t_write_title"></h2>
      <p id="t_write_text"></p>
      <ul>
        <li id="t_write_li1"></li>
        <li id="t_write_li2"></li>
        <li id="t_write_li3"></li>
      </ul>
      <div class="btnrow">
        <button class="btn" id="btn_write_go" type="button">‚úçÔ∏è <span id="t_btn_write_go"></span></button>
        <button class="btn secondary" id="btn_register_go" type="button">üìú <span id="t_btn_register"></span></button>
      </div>
      <p class="small" id="t_write_note"></p>
    </article>

    <!-- WRITE BOX + LOCAL SEND -->
    <article class="card" id="writebox">
      <h2 id="t_writebox_title"></h2>
      <p id="t_writebox_text"></p>

      <textarea id="mango_line" placeholder=""></textarea>

      <div class="btnrow">
        <button class="btn secondary" id="btn_save" type="button">üíæ <span id="t_btn_save"></span></button>
        <button class="btn secondary" id="btn_copy" type="button">üìã <span id="t_btn_copy"></span></button>
        <button class="btn" id="btn_send_local" type="button">‚úÖ <span id="t_btn_send_local"></span></button>
        <button class="btn secondary" id="btn_clear_draft" type="button">üóëÔ∏è <span id="t_btn_clear_draft"></span></button>
        <button class="btn secondary" id="btn_top" type="button">‚¨ÜÔ∏è <span id="t_btn_top"></span></button>
      </div>

      <div class="notice" id="status"></div>
      <p class="small" id="t_writebox_note"></p>
    </article>

    <!-- LOCAL REGISTER (ON SITE FOR YOU) -->
    <article class="card" id="localregister">
      <h2 id="t_localreg_title"></h2>
      <p id="t_localreg_text"></p>

      <div class="btnrow">
        <button class="btn secondary" id="btn_export" type="button">üìã <span id="t_btn_export"></span></button>
        <button class="btn secondary" id="btn_clear_all" type="button">üóëÔ∏è <span id="t_btn_clear_all"></span></button>
        <button class="btn secondary" id="btn_top2" type="button">‚¨ÜÔ∏è <span id="t_btn_top2"></span></button>
      </div>

      <div class="list" id="local_list"></div>
      <p class="small" id="t_localreg_note"></p>
    </article>

    <!-- PUBLIC REGISTER PRINCIPLES -->
    <article class="card" id="register">
      <h2 id="t_reg_title"></h2>
      <p id="t_reg_intro1"></p>
      <p id="t_reg_intro2"></p>
      <div class="eq" id="t_reg_eq"></div>
      <p id="t_reg_no"></p>

      <hr>
      <h3 id="t_reg_time_h"></h3>
      <p id="t_reg_time_p1"></p>
      <p id="t_reg_time_p2"></p>

      <hr>
      <h3 id="t_reg_struct_h"></h3>
      <p id="t_reg_struct_p1"></p>
      <p id="t_reg_struct_p2"></p>

      <hr>
      <h3 id="t_reg_how_h"></h3>
      <p id="t_reg_how_p"></p>
      <ul>
        <li id="t_reg_how_li1"></li>
        <li id="t_reg_how_li2"></li>
        <li id="t_reg_how_li3"></li>
        <li id="t_reg_how_li4"></li>
      </ul>
      <p class="small" id="t_reg_balance_note"></p>

      <hr>
      <h3 id="t_reg_anticapture_h"></h3>
      <p id="t_reg_anticapture_p1"></p>
      <p id="t_reg_anticapture_p2"></p>

      <hr>
      <h3 id="t_reg_live_h"></h3>
      <p id="t_reg_live_p"></p>
      <p class="small" id="t_reg_live_note"></p>

      <div class="btnrow">
        <button class="btn secondary" id="btn_back_write" type="button">‚¨ÜÔ∏è <span id="t_btn_back_write"></span></button>
      </div>
    </article>

    <!-- WHAT -->
    <article class="card" id="what">
      <h2 id="t_what_title"></h2>
      <p id="t_what_text1"></p>
      <p id="t_what_text2"></p>
      <ul>
        <li id="t_what_li1"></li>
        <li id="t_what_li2"></li>
        <li id="t_what_li3"></li>
        <li id="t_what_li4"></li>
      </ul>
    </article>

    <!-- CONTACT -->
    <article class="card" id="contact">
      <h2 id="t_contact_title"></h2>
      <p id="t_contact_text"></p>
      <p class="mono" style="margin:10px 0 0;">info@mangoinfrastruttura.org</p>
      <p class="small" id="t_contact_note"></p>
    </article>

  </section>

  <footer class="footer">
    <div id="t_footer_line1"></div>
    <div class="small" id="t_footer_line2" style="margin-top:8px;"></div>
  </footer>
</main>

<script>
  const SUPPORTED = ["it","en","es","fr","de","zh"];
  const DEFAULT_LANG = "it";
  const KEY_DRAFT = "mango_line_draft_v2";
  const KEY_LOCAL = "mango_local_register_v1";

  const T = {
    it:{
      title:"Un‚Äôinfrastruttura di fiducia locale non monetaria.",
      subtitle:"Mango riconosce scambi reali tra persone con una riga, senza quantit√† n√© valore numerico.",
      do_title:"Fai Mango adesso",
      do_text:"Se √® successo qualcosa di reale tra due persone (aiuto, tempo, cura, presenza, gesto), Mango lo riconosce. Non valuta. Non misura. Non accumula.",
      do_note:"Principio chiave: una riga = ü•≠. Nessun numero. Nessuna equivalenza.",
      btn_first:"Scrivi qui",
      btn_about:"Cos‚Äô√® Mango",

      write_title:"Scrivi una riga
