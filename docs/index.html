<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mango ‚Äì Infrastruttura</title>

  <style>
    :root { --max: 860px; }
    body{ margin:0; font-family:-apple-system,BlinkMacSystemFont,system-ui,Segoe UI,Roboto,Arial; background:#fff; color:#111; }
    .wrap{ max-width:var(--max); margin:0 auto; padding:0 18px; }

    header{ text-align:center; padding:88px 18px 22px; }

    /* Mango sopra = bottone verso pagina bianca */
    .brand{
      display:inline-flex; align-items:center; justify-content:center;
      text-decoration:none; color:#111;
      font-size:2.45rem; font-weight:750; letter-spacing:.2px;
      padding:10px 16px;
      border-radius:18px;
      border:1px solid rgba(0,0,0,.10);
      background:#fff;
    }
    .brand:active{ transform: translateY(1px); }

    .manifesto{ text-align:center; margin:52px auto 30px; }
    .manifesto h2{ margin:0; font-size:2rem; font-weight:700; line-height:1.35; }
    .manifesto p{ margin:16px 0 0; opacity:.6; }

    nav{ display:flex; gap:10px; justify-content:center; flex-wrap:wrap; margin:26px 0 8px; }
    .btn{
      appearance:none; border:1px solid rgba(0,0,0,.12); background:#fff; color:#111;
      padding:12px 14px; border-radius:14px; font-weight:700; cursor:pointer; text-decoration:none;
      display:inline-flex; align-items:center; gap:8px;
    }
    .btn:active{ transform: translateY(1px); }
    .btn.primary{ border-color:rgba(0,0,0,.18); }

    section{ margin:58px 0; }
    h3{ margin:0 0 14px; font-size:1.45rem; }
    p{ margin:0; line-height:1.75; font-size:1.05rem; }

    .card{
      border:1px solid rgba(0,0,0,.12);
      border-radius:18px; padding:16px; margin-top:14px;
    }

    .langbar{
      position:fixed; top:14px; right:14px;
      display:flex; gap:8px; flex-wrap:wrap;
      background:rgba(255,255,255,.92);
      border:1px solid rgba(0,0,0,.10);
      border-radius:16px; padding:8px 10px;
      backdrop-filter: blur(10px);
      z-index:20;
    }
    .langbar a{
      font-size:.95rem; text-decoration:none; color:#111; opacity:.75; font-weight:750;
      padding:6px 10px; border-radius:12px; border:1px solid rgba(0,0,0,.10);
      background:#fff;
    }
    .langbar a.active{ opacity:1; border-color:rgba(0,0,0,.25); }

    #registerList{ display:flex; flex-direction:column; gap:10px; }
    .line{
      border:1px solid rgba(0,0,0,.10);
      border-radius:16px; padding:14px 14px;
      background:#fff;
      line-height:1.55;
      word-break: break-word;
    }
    .muted{ opacity:.65; font-size:.98rem; }

    footer{ text-align:center; padding:68px 18px 46px; opacity:.62; font-size:.95rem; line-height:1.55; }
  </style>
</head>

<body>
  <div class="langbar" id="langbar"></div>

  <header class="wrap">
    <!-- Mango sopra: bottone verso pagina bianca (404 manifesto) -->
    <a class="brand" id="brandLink" href="404.html">Mango</a>

    <div class="manifesto">
      <h2 id="m1">Questo dominio pu√≤ sparire.<br/>Mango no.</h2>
      <p id="m2">Mango accade tra persone reali.</p>
    </div>

    <nav>
      <a class="btn primary" id="btnDo" href="#do">‚ö° <span id="t_do_now">Fai Mango adesso</span></a>
      <a class="btn" id="btnWrite" href="primo-scambio.html">‚úçÔ∏è <span id="t_write_line">Scrivi una riga</span></a>
      <a class="btn" id="btnWhat" href="#what">‚ùì <span id="t_what_is">Cos‚Äô√® Mango</span></a>
      <a class="btn" id="btnReg" href="#register">üìì <span id="t_register">Registro</span></a>
    </nav>
  </header>

  <main class="wrap">
    <section id="do">
      <h3 id="h_do">Fai Mango adesso</h3>
      <p id="p_do">
        Se riconosci uno scambio reale tra persone, puoi scrivere una riga.
        Non servono numeri. Non serve un conto. Non serve accumulare.
        Una riga √® un Mango.
      </p>
      <div class="card">
        <a class="btn primary" id="btnStart" href="primo-scambio.html">‚úçÔ∏è <span id="t_start">Vai a Scrivi una riga</span></a>
      </div>
    </section>

    <section id="write">
      <h3 id="h_write">Scrivi una riga</h3>
      <p id="p_write">
        Una riga descrive uno scambio reale. Non misura valore. Non crea credito.
        Non genera saldo. √à riconoscimento.
      </p>
    </section>

    <section id="what">
      <h3 id="h_what">Cos‚Äô√® Mango</h3>
      <p id="p_what">
        Mango √® un‚Äôinfrastruttura di fiducia locale non monetaria, non accumulabile e non appropriabile.
        Pu√≤ esistere anche senza questo sito. Vive nelle relazioni.
      </p>
    </section>

    <section id="register">
      <h3 id="h_register">Registro</h3>
      <p class="muted" id="p_register_note">
        Qui vedi solo le righe salvate su questo dispositivo. Nessun numero. Nessun saldo. Nessun timestamp.
      </p>

      <div class="card">
        <div id="registerList"></div>
        <div id="emptyRegister" class="muted" style="display:none; padding-top:8px;">
          <span id="t_empty">Nessuna riga salvata. Scrivi una riga.</span>
        </div>
      </div>

      <div class="card" style="display:flex; gap:10px; flex-wrap:wrap;">
        <a class="btn primary" id="btnAddLine" href="primo-scambio.html">‚úçÔ∏è <span id="t_add_line">Aggiungi una riga</span></a>
        <button class="btn" id="btnClear">üßº <span id="t_clear">Svuota registro locale</span></button>
      </div>
    </section>
  </main>

  <footer>
    Creato da Juan de Dios Annaloro Mercedes<br/>
    In memoria di Larimar<br/>
    02 febbraio 2026
  </footer>

<script>
/* =========================
   LINGUE (6)
   ========================= */
const dict = {
  it: {
    do_now:"Fai Mango adesso", write_line:"Scrivi una riga", what_is:"Cos‚Äô√® Mango", register:"Registro",
    h_do:"Fai Mango adesso",
    p_do:"Se riconosci uno scambio reale tra persone, puoi scrivere una riga. Non servono numeri. Non serve un conto. Non serve accumulare. Una riga √® un Mango.",
    t_start:"Vai a Scrivi una riga",
    h_write:"Scrivi una riga",
    p_write:"Una riga descrive uno scambio reale. Non misura valore. Non crea credito. Non genera saldo. √à riconoscimento.",
    h_what:"Cos‚Äô√® Mango",
    p_what:"Mango √® un‚Äôinfrastruttura di fiducia locale non monetaria, non accumulabile e non appropriabile. Pu√≤ esistere anche senza questo sito. Vive nelle relazioni.",
    h_register:"Registro",
    p_register_note:"Qui vedi solo le righe salvate su questo dispositivo. Nessun numero. Nessun saldo. Nessun timestamp.",
    empty:"Nessuna riga salvata. Scrivi una riga.",
    add_line:"Aggiungi una riga",
    clear:"Svuota registro locale",
    confirm_clear:"Vuoi davvero svuotare il registro locale su questo dispositivo?"
  },
  en: {
    do_now:"Do Mango now", write_line:"Write a line", what_is:"What is Mango", register:"Register",
    h_do:"Do Mango now",
    p_do:"If you recognize a real exchange between people, you can write a line. No numbers. No account. No accumulation. One line is a Mango.",
    t_start:"Go to Write a line",
    h_write:"Write a line",
    p_write:"A line describes a real exchange. It does not measure value. It does not create credit. It does not produce a balance. It is recognition.",
    h_what:"What is Mango",
    p_what:"Mango is a local trust infrastructure: non-monetary, non-accumulable, non-appropriable. It can exist without this site. It lives in relationships.",
    h_register:"Register",
    p_register_note:"You only see lines saved on this device. No numbers. No balances. No timestamps.",
    empty:"No saved lines. Write a line.",
    add_line:"Add a line",
    clear:"Clear local register",
    confirm_clear:"Do you really want to clear the local register on this device?"
  },
  es: {
    do_now:"Haz Mango ahora", write_line:"Escribe una l√≠nea", what_is:"¬øQu√© es Mango?", register:"Registro",
    h_do:"Haz Mango ahora",
    p_do:"Si reconoces un intercambio real entre personas, puedes escribir una l√≠nea. Sin n√∫meros. Sin cuenta. Sin acumulaci√≥n. Una l√≠nea es un Mango.",
    t_start:"Ir a Escribe una l√≠nea",
    h_write:"Escribe una l√≠nea",
    p_write:"Una l√≠nea describe un intercambio real. No mide valor. No crea cr√©dito. No genera saldo. Es reconocimiento.",
    h_what:"¬øQu√© es Mango?",
    p_what:"Mango es una infraestructura local de confianza: no monetaria, no acumulable y no apropiable. Puede existir sin este sitio. Vive en las relaciones.",
    h_register:"Registro",
    p_register_note:"Aqu√≠ solo ves l√≠neas guardadas en este dispositivo. Sin n√∫meros. Sin saldos. Sin marcas de tiempo.",
    empty:"No hay l√≠neas guardadas. Escribe una l√≠nea.",
    add_line:"A√±adir una l√≠nea",
    clear:"Vaciar registro local",
    confirm_clear:"¬øSeguro que quieres vaciar el registro local en este dispositivo?"
  },
  fr: {
    do_now:"Fais Mango maintenant", write_line:"√âcris une ligne", what_is:"Qu‚Äôest-ce que Mango", register:"Registre",
    h_do:"Fais Mango maintenant",
    p_do:"Si tu reconnais un √©change r√©el entre personnes, tu peux √©crire une ligne. Pas de nombres. Pas de compte. Pas d‚Äôaccumulation. Une ligne = un Mango.",
    t_start:"Aller √† √âcris une ligne",
    h_write:"√âcris une ligne",
    p_write:"Une ligne d√©crit un √©change r√©el. Elle ne mesure pas la valeur. Elle ne cr√©e pas de cr√©dit. Elle ne produit pas de solde. C‚Äôest une reconnaissance.",
    h_what:"Qu‚Äôest-ce que Mango",
    p_what:"Mango est une infrastructure locale de confiance : non mon√©taire, non accumulable, non appropriable. Elle peut exister sans ce site. Elle vit dans les relations.",
    h_register:"Registre",
    p_register_note:"Tu vois uniquement les lignes enregistr√©es sur cet appareil. Pas de nombres. Pas de soldes. Pas d‚Äôhorodatage.",
    empty:"Aucune ligne enregistr√©e. √âcris une ligne.",
    add_line:"Ajouter une ligne",
    clear:"Vider le registre local",
    confirm_clear:"Veux-tu vraiment vider le registre local sur cet appareil ?"
  },
  de: {
    do_now:"Mach Mango jetzt", write_line:"Schreibe eine Zeile", what_is:"Was ist Mango", register:"Register",
    h_do:"Mach Mango jetzt",
    p_do:"Wenn du einen realen Austausch zwischen Menschen erkennst, kannst du eine Zeile schreiben. Keine Zahlen. Kein Konto. Keine Ansammlung. Eine Zeile ist ein Mango.",
    t_start:"Zu Schreibe eine Zeile",
    h_write:"Schreibe eine Zeile",
    p_write:"Eine Zeile beschreibt einen realen Austausch. Sie misst keinen Wert. Sie erzeugt keinen Kredit. Sie erzeugt keinen Saldo. Sie ist Anerkennung.",
    h_what:"Was ist Mango",
    p_what:"Mango ist eine lokale Vertrauens-Infrastruktur: nicht monet√§r, nicht ansammelbar, nicht aneignbar. Sie kann ohne diese Seite existieren. Sie lebt in Beziehungen.",
    h_register:"Register",
    p_register_note:"Du siehst nur Zeilen, die auf diesem Ger√§t gespeichert sind. Keine Zahlen. Keine Salden. Keine Zeitstempel.",
    empty:"Keine gespeicherten Zeilen. Schreibe eine Zeile.",
    add_line:"Zeile hinzuf√ºgen",
    clear:"Lokales Register leeren",
    confirm_clear:"Willst du das lokale Register auf diesem Ger√§t wirklich leeren?"
  },
  zh: {
    do_now:"ÁèæÂú®Â∞±ÂÅö Mango", write_line:"ÂØ´‰∏ã‰∏ÄË°å", what_is:"‰ªÄÈ∫ºÊòØ Mango", register:"Êú¨Ê©üÁ¥ÄÈåÑ",
    h_do:"ÁèæÂú®Â∞±ÂÅö Mango",
    p_do:"Â¶ÇÊûú‰Ω†Ë™çÂèØ‰∫∫Ëàá‰∫∫‰πãÈñìÁöÑ‰∏ÄÊ¨°ÁúüÂØ¶‰∫§ÊèõÔºå‰Ω†Â∞±ÂèØ‰ª•ÂØ´‰∏ã‰∏ÄË°å„ÄÇÊ≤íÊúâÊï∏Â≠ó„ÄÇÊ≤íÊúâÂ∏≥Êà∂„ÄÇÊ≤íÊúâÁ¥ØÁ©ç„ÄÇ‰∏ÄË°åÂ∞±ÊòØ‰∏ÄÂÄã Mango„ÄÇ",
    t_start:"ÂâçÂæÄÔºöÂØ´‰∏ã‰∏ÄË°å",
    h_write:"ÂØ´‰∏ã‰∏ÄË°å",
    p_write:"‰∏ÄË°åÊèèËø∞‰∏ÄÊ¨°ÁúüÂØ¶‰∫§Êèõ„ÄÇ‰∏çË°°ÈáèÂÉπÂÄº„ÄÇ‰∏çÁî¢Áîü‰ø°Áî®„ÄÇ‰∏çÁî¢ÁîüÁµêÈ§ò„ÄÇÂÆÉÊòØÊâøË™ç„ÄÇ",
    h_what:"‰ªÄÈ∫ºÊòØ Mango",
    p_what:"Mango ÊòØ‰∏ÄÁ®ÆÂú®Âú∞‰ø°‰ªªÂü∫Á§éË®≠ÊñΩÔºöÈùûË≤®Âπ£„ÄÅ‰∏çÂèØÁ¥ØÁ©ç„ÄÅ‰∏çÂèØÂç†Êúâ„ÄÇÂç≥‰ΩøÊ≤íÊúâÈÄôÂÄãÁ∂≤Á´ô‰πüËÉΩÂ≠òÂú®„ÄÇÂÆÉÊ¥ªÂú®Èóú‰øÇ‰πã‰∏≠„ÄÇ",
    h_register:"Êú¨Ê©üÁ¥ÄÈåÑ",
    p_register_note:"Ê≠§ËôïÂè™È°ØÁ§∫ÂÑ≤Â≠òÂú®Êú¨Ë£ùÁΩÆ‰∏äÁöÑÊñáÂ≠óË°å„ÄÇÊ≤íÊúâÊï∏Â≠ó„ÄÇÊ≤íÊúâÁµêÈ§ò„ÄÇÊ≤íÊúâÊôÇÈñìÊà≥Ë®ò„ÄÇ",
    empty:"Â∞öÁÑ°ÂÑ≤Â≠òÂÖßÂÆπ„ÄÇË´ãÂØ´‰∏ã‰∏ÄË°å„ÄÇ",
    add_line:"Êñ∞Â¢û‰∏ÄË°å",
    clear:"Ê∏ÖÁ©∫Êú¨Ê©üÁ¥ÄÈåÑ",
    confirm_clear:"‰Ω†Á¢∫ÂÆöË¶ÅÊ∏ÖÁ©∫Êú¨Ë£ùÁΩÆ‰∏äÁöÑÊú¨Ê©üÁ¥ÄÈåÑÂóéÔºü"
  }
};

function getLang() {
  const q = new URLSearchParams(location.search);
  const v = (q.get("lang") || "it").toLowerCase();
  return dict[v] ? v : "it";
}
const LANG = getLang();
function t(key){ return dict[LANG][key] || dict.it[key] || key; }
function setText(id, txt){ const el=document.getElementById(id); if(el) el.textContent=txt; }

function buildLangbar(){
  const bar = document.getElementById("langbar");
  const langs = [["it","IT"],["en","EN"],["es","ES"],["fr","FR"],["de","DE"],["zh","ZH"]];
  const base = location.pathname.split("/").pop() || "index.html";
  const hash = location.hash || "";
  bar.innerHTML = langs.map(([k,label])=>{
    const a = document.createElement("a");
    a.href = `${base}?lang=${k}${hash}`;
    a.textContent = label;
    if(k===LANG) a.classList.add("active");
    return a.outerHTML;
  }).join("");
}

function applyI18n(){
  setText("t_do_now", t("do_now"));
  setText("t_write_line", t("write_line"));
  setText("t_what_is", t("what_is"));
  setText("t_register", t("register"));
  setText("h_do", t("h_do"));
  setText("p_do", t("p_do"));
  setText("t_start", t("t_start"));
  setText("h_write", t("h_write"));
  setText("p_write", t("p_write"));
  setText("h_what", t("h_what"));
  setText("p_what", t("p_what"));
  setText("h_register", t("h_register"));
  setText("p_register_note", t("p_register_note"));
  setText("t_empty", t("empty"));
  setText("t_add_line", t("add_line"));
  setText("t_clear", t("clear"));

  // link verso primo-scambio con lang
  const links = document.querySelectorAll('a[href="primo-scambio.html"]');
  links.forEach(a => a.href = `primo-scambio.html?lang=${LANG}`);

  // Mango sopra (brand) va alla pagina bianca, mantenendo lang
  document.getElementById("brandLink").href = `404.html?lang=${LANG}`;
}

const STORE_KEY = "mango_register_lines";

function loadLines(){
  try{
    const raw = localStorage.getItem(STORE_KEY);
    const arr = raw ? JSON.parse(raw) : [];
    return Array.isArray(arr) ? arr.filter(x => typeof x === "string" && x.trim() !== "") : [];
  }catch(_){ return []; }
}
function saveLines(arr){ localStorage.setItem(STORE_KEY, JSON.stringify(arr)); }

function renderRegister(){
  const list = document.getElementById("registerList");
  const empty = document.getElementById("emptyRegister");
  const lines = loadLines();

  list.innerHTML = "";
  if(lines.length === 0){
    empty.style.display = "block";
    return;
  }
  empty.style.display = "none";

  lines.slice().reverse().forEach(line=>{
    const d = document.createElement("div");
    d.className = "line";
    d.textContent = line;
    list.appendChild(d);
  });
}

document.getElementById("btnClear").addEventListener("click", ()=>{
  if(confirm(t("confirm_clear"))){
    saveLines([]);
    renderRegister();
  }
});

buildLangbar();
applyI18n();
renderRegister();

if(location.hash === "#register"){
  setTimeout(()=>document.getElementById("register").scrollIntoView({behavior:"smooth"}), 150);
}
</script>
</body>
</html>
