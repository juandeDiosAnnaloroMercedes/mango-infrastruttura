<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="Mango â€” infrastruttura di fiducia locale non monetaria, non appropriabile. Fai Mango adesso. Scrivi una riga. Cosâ€™Ã¨ Mango." />
  <meta name="robots" content="index,follow" />
  <link rel="canonical" href="https://mangoinfrastruttura.org/" />
  <meta property="og:title" content="Mango" />
  <meta property="og:description" content="Infrastruttura di fiducia locale non monetaria, non appropriabile. Fai Mango adesso. Scrivi una riga. Cosâ€™Ã¨ Mango." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://mangoinfrastruttura.org/" />
  <title>Mango</title>

  <style>
    :root{
      --bg:#0b0f14;
      --panel:#0f1622;
      --panel2:#0c1320;
      --txt:#e9eef7;
      --muted:#a9b6cc;
      --line:rgba(255,255,255,.10);
      --btn:#1e2a3c;
      --btn2:#142034;
      --accent:#4ea1ff;
      --ok:#2bd576;
      --warn:#ffb020;
      --bad:#ff4d4d;
      --radius:16px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 700px at 20% -10%, rgba(78,161,255,.18), transparent 55%),
                  radial-gradient(900px 600px at 110% 20%, rgba(43,213,118,.12), transparent 55%),
                  var(--bg);
      color:var(--txt);
      line-height:1.35;
    }
    a{color:inherit}
    .wrap{max-width:980px;margin:0 auto;padding:16px 14px 70px}
    header{
      display:flex;align-items:center;gap:12px;
      padding:10px 10px;border:1px solid var(--line);
      background:rgba(15,22,34,.55); backdrop-filter: blur(10px);
      border-radius:var(--radius);
      position:sticky; top:10px; z-index:50;
    }
    .brand{
      display:flex;align-items:center;gap:10px;min-width:160px;
      text-decoration:none;
    }
    .mangoDot{
      width:38px;height:38px;border-radius:12px;
      background: linear-gradient(135deg, rgba(78,161,255,.55), rgba(43,213,118,.35));
      display:grid;place-items:center;
      border:1px solid var(--line);
      font-size:20px;
    }
    .brandTitle{font-weight:800;letter-spacing:.2px}
    .brandSub{font-size:12px;color:var(--muted);margin-top:1px}
    .grow{flex:1}
    .langRow{
      display:flex;flex-wrap:wrap;gap:8px;justify-content:flex-end;align-items:center;
    }
    .chip{
      border:1px solid var(--line);
      background:rgba(20,32,52,.65);
      color:var(--txt);
      border-radius:999px;
      padding:8px 10px;
      font-size:12px;
      cursor:pointer;
      user-select:none;
    }
    .chip.active{outline:2px solid rgba(78,161,255,.55);border-color:rgba(78,161,255,.55)}
    .panel{
      margin-top:14px;
      border:1px solid var(--line);
      background:rgba(15,22,34,.55);
      border-radius:var(--radius);
      overflow:hidden;
    }
    .panelHd{
      padding:14px 14px 10px;
      border-bottom:1px solid var(--line);
      display:flex; align-items:flex-start; gap:12px; flex-wrap:wrap;
    }
    .panelHd h2{margin:0;font-size:20px}
    .panelHd p{margin:6px 0 0;color:var(--muted);max-width:760px}
    .panelBd{padding:14px}
    .btnRow{display:flex;flex-wrap:wrap;gap:10px;margin-top:12px}
    .btn{
      appearance:none;border:1px solid var(--line);
      background:rgba(30,42,60,.8);
      color:var(--txt);
      padding:12px 14px;
      border-radius:14px;
      cursor:pointer;
      font-weight:650;
      letter-spacing:.2px;
    }
    .btn:hover{background:rgba(30,42,60,.95)}
    .btn:disabled{opacity:.45;cursor:not-allowed}
    .btn.primary{background:rgba(78,161,255,.20);border-color:rgba(78,161,255,.40)}
    .btn.primary:hover{background:rgba(78,161,255,.28)}
    .btn.ghost{background:rgba(20,32,52,.50)}
    .btn.bad{background:rgba(255,77,77,.12);border-color:rgba(255,77,77,.35)}
    .grid{
      display:grid;
      grid-template-columns: 1.15fr .85fr;
      gap:12px;
    }
    @media(max-width:860px){ .grid{grid-template-columns:1fr} }
    textarea{
      width:100%;
      min-height:120px;
      resize:vertical;
      border:1px solid var(--line);
      background:rgba(10,16,26,.65);
      color:var(--txt);
      border-radius:14px;
      padding:12px 12px;
      font-size:16px;
      outline:none;
    }
    textarea:focus{border-color:rgba(78,161,255,.55); box-shadow:0 0 0 3px rgba(78,161,255,.12)}
    .smallnote{color:var(--muted);font-size:13px;margin-top:10px}
    .statusLine{
      margin-top:10px;
      font-size:13px;
      color:var(--muted);
      min-height:18px;
    }
    .statusLine b{color:var(--txt)}
    .muroWrap{
      display:grid;
      grid-template-columns: repeat(2, 1fr);
      gap:12px;
    }
    @media(max-width:860px){ .muroWrap{grid-template-columns:1fr} }
    .muroBox{
      border:1px solid var(--line);
      background:rgba(12,19,32,.55);
      border-radius:14px;
      padding:12px 12px;
    }
    .muroLang{
      font-size:12px;
      font-weight:800;
      letter-spacing:.6px;
      color:var(--muted);
      margin-bottom:8px;
      display:flex;justify-content:space-between;align-items:center;
    }
    ul.muro-list{margin:0;padding:0 0 0 18px}
    ul.muro-list li{margin:7px 0;color:var(--txt)}
    footer{
      margin-top:14px;
      text-align:center;
      color:var(--muted);
      font-size:13px;
      padding:14px 10px;
    }
    .toast{
      position:fixed;
      left:50%;
      transform:translateX(-50%);
      bottom:16px;
      z-index:9999;
      padding:12px 14px;
      border-radius:14px;
      border:1px solid var(--line);
      background:rgba(15,22,34,.90);
      backdrop-filter: blur(10px);
      color:var(--txt);
      min-width:260px;
      max-width:92vw;
      text-align:center;
      opacity:0;
      pointer-events:none;
      transition:opacity .18s ease, transform .18s ease;
    }
    .toast.show{opacity:1; transform:translateX(-50%) translateY(-2px)}
    .toast.good{border-color:rgba(43,213,118,.45)}
    .toast.warn{border-color:rgba(255,176,32,.50)}
  </style>
</head>

<body>
  <div class="wrap">

    <header>
      <a class="brand" href="bianco.html" title="ðŸ¥­">
        <div class="mangoDot">ðŸ¥­</div>
        <div>
          <div class="brandTitle">Mango</div>
          <div class="brandSub" id="brandSub">Infrastruttura di fiducia locale</div>
        </div>
      </a>

      <div class="grow"></div>

      <div class="langRow" aria-label="Lingua">
        <button class="chip" data-lang="it">IT</button>
        <button class="chip" data-lang="en">EN</button>
        <button class="chip" data-lang="es">ES</button>
        <button class="chip" data-lang="fr">FR</button>
        <button class="chip" data-lang="de">DE</button>
        <button class="chip" data-lang="zh-hant">ä¸­æ–‡</button>
      </div>
    </header>

    <!-- 1) Fai Mango adesso -->
    <section class="panel" id="sec1">
      <div class="panelHd">
        <div>
          <h2 id="sec1Title">Fai Mango adesso</h2>
          <p id="sec1Text">
            Mango nasce dagli scambi reali. Qui trovi un modo semplice per iniziare, senza numeri e senza valore.
          </p>
        </div>
      </div>
      <div class="panelBd">
        <div class="btnRow">
          <a class="btn primary" id="btnPrimo" href="primo-scambio.html">Primo scambio</a>
          <a class="btn" id="btnPDF" href="Documento_Fondativo_Mango.pdf" target="_blank" rel="noopener noreferrer">PDF (Multilingua)</a>
          <a class="btn ghost" id="btnStampa" href="stampa-qr.html">Stampa &amp; QR</a>
        </div>

        <div class="smallnote" id="sec1Note">
          Suggerimento: fai un gesto reale oggi (aiuto, presenza, competenza, cura), poi scrivi una riga.
        </div>
      </div>
    </section>

    <!-- 2) Scrivi una riga -->
    <section class="panel" id="sec2">
      <div class="panelHd">
        <div>
          <h2 id="sec2Title">Scrivi una riga</h2>
          <p id="sec2Text">
            Una riga descrive uno scambio reale. Niente numeri, niente valore. Solo una frase.
          </p>
        </div>
      </div>

      <div class="panelBd">
        <div class="grid">
          <div>
            <textarea id="riga" placeholder="Scrivi qui la tua rigaâ€¦"></textarea>

            <div class="btnRow">
              <button class="btn primary" id="btnInvia" type="button" disabled>Invia</button>
              <button class="btn ghost" id="btnPulisci" type="button">Pulisci</button>
              <button class="btn" id="btnApriArchivio" type="button">Apri archivio</button>
              <button class="btn bad" id="btnSvuotaArchivio" type="button">Svuota archivio</button>
            </div>

            <div class="statusLine" id="statusLine"></div>

            <div class="smallnote" id="sec2Note">
              Nota: lâ€™archivio Ã¨ locale sul tuo dispositivo (non Ã¨ pubblico).
            </div>
          </div>

          <div class="panel" style="margin:0;border-radius:14px;background:rgba(12,19,32,.50)">
            <div class="panelBd" style="padding:12px">
              <div style="font-weight:800;margin-bottom:6px" id="boxRulesTitle">Regole rapide</div>
              <div style="color:var(--muted);font-size:13px" id="boxRulesText">
                Scrivi solo ciÃ² che Ã¨ accaduto davvero. Niente cifre. Se vuoi andare a capo, usa Shift+Invio.
              </div>
              <div style="margin-top:10px;color:var(--muted);font-size:13px">
                <span id="countLabel">Righe in archivio:</span> <b id="countVal">0</b>
              </div>
            </div>
          </div>
        </div>

        <div class="smallnote" id="pdfNote">
          Se vuoi, stampa il QR: chiunque potrÃ  iniziare dal telefono.
        </div>
      </div>
    </section>

    <!-- 3) Cosâ€™Ã¨ Mango -->
    <section class="panel" id="sec3">
      <div class="panelHd">
        <div>
          <h2 id="sec3Title">Cosâ€™Ã¨ Mango</h2>
          <p id="sec3Text">
            Mango Ã¨ unâ€™infrastruttura di fiducia locale non monetaria, non appropriabile, progettata per evitare accumulo, speculazione e cattura istituzionale.
            Creato da Juan de Dios Annaloro Mercedes in memoria di Larimar.
          </p>
        </div>
      </div>
      <div class="panelBd">
        <div class="btnRow">
          <a class="btn" id="btnFondativo" href="Documento_Fondativo_Mango.pdf" target="_blank" rel="noopener noreferrer">Leggi il documento fondativo</a>
          <a class="btn ghost" id="btnFAQ" href="FAQ_Mango.pdf" target="_blank" rel="noopener noreferrer">FAQ</a>
        </div>
      </div>
    </section>

    <!-- MURO MANGO -->
    <section class="panel" id="muro">
      <div class="panelHd">
        <div>
          <h2 id="muroTitle">Muro Mango</h2>
          <p id="muroText">Sette righe anonime per lingua, scelte a caso a ogni visita. Senza identitÃ , senza date, senza archivio consultabile.</p>
        </div>
      </div>
      <div class="panelBd">
        <div class="muroWrap">
          <div class="muroBox" lang="it">
            <div class="muroLang">IT <span>ðŸ¥­</span></div>
            <ul class="muro-list" data-lang="it"></ul>
          </div>
          <div class="muroBox" lang="en">
            <div class="muroLang">EN <span>ðŸ¥­</span></div>
            <ul class="muro-list" data-lang="en"></ul>
          </div>
          <div class="muroBox" lang="es">
            <div class="muroLang">ES <span>ðŸ¥­</span></div>
            <ul class="muro-list" data-lang="es"></ul>
          </div>
          <div class="muroBox" lang="fr">
            <div class="muroLang">FR <span>ðŸ¥­</span></div>
            <ul class="muro-list" data-lang="fr"></ul>
          </div>
          <div class="muroBox" lang="de">
            <div class="muroLang">DE <span>ðŸ¥­</span></div>
            <ul class="muro-list" data-lang="de"></ul>
          </div>
          <div class="muroBox" lang="zh-hant">
            <div class="muroLang">ä¸­æ–‡ <span>ðŸ¥­</span></div>
            <ul class="muro-list" data-lang="zh-hant"></ul>
          </div>
        </div>
      </div>
    </section>

    <footer id="footerTxt">Mango â€” nato il 02 febbraio 2026</footer>

    <p style="text-align:center; font-size:0.95em; margin-top:6px;">
      <a href="mailto:press@mangoinfrastruttura.org">press@mangoinfrastruttura.org</a>
    </p>

  </div>

  <div class="toast" id="toastBox"></div>

  <script>
    // -------------------------------------------------------
    // Lingue: ?lang=it|en|es|fr|de|zh-hant
    // -------------------------------------------------------
    const STR = {
      it: {
        brandSub: "Infrastruttura di fiducia locale",
        sec1Title:"Fai Mango adesso",
        sec1Text:"Mango nasce dagli scambi reali. Qui trovi un modo semplice per iniziare, senza numeri e senza valore.",
        sec1Note:"Suggerimento: fai un gesto reale oggi (aiuto, presenza, competenza, cura), poi scrivi una riga.",
        btnPrimo:"Primo scambio",
        btnPDF:"PDF (Multilingua)",
        btnStampa:"Stampa & QR",

        sec2Title:"Scrivi una riga",
        sec2Text:"Una riga descrive uno scambio reale. Niente numeri, niente valore. Solo una frase.",
        rigaPh:"Scrivi qui la tua rigaâ€¦",
        btnInvia:"Invia",
        btnPulisci:"Pulisci",
        btnApriArchivio:"Apri archivio",
        btnSvuotaArchivio:"Svuota archivio",
        sec2Note:"Nota: lâ€™archivio Ã¨ locale sul tuo dispositivo (non Ã¨ pubblico).",
        boxRulesTitle:"Regole rapide",
        boxRulesText:"Scrivi solo ciÃ² che Ã¨ accaduto davvero. Niente cifre. Se vuoi andare a capo, usa Shift+Invio.",
        countLabel:"Righe in archivio:",
        pdfNote:"Se vuoi, stampa il QR: chiunque potrÃ  iniziare dal telefono.",

        sec3Title:"Cosâ€™Ã¨ Mango",
        sec3Text:"Mango Ã¨ unâ€™infrastruttura di fiducia locale non monetaria, non appropriabile, progettata per evitare accumulo, speculazione e cattura istituzionale. Creato da Juan de Dios Annaloro Mercedes in memoria di Larimar.",
        btnFondativo:"Leggi il documento fondativo",
        btnFAQ:"FAQ",

        muroTitle:"Muro Mango",
        muroText:"Sette righe anonime per lingua, scelte a caso a ogni visita. Senza identitÃ , senza date, senza archivio consultabile.",
        footerTxt:"Mango â€” nato il 02 febbraio 2026",

        savedOk:"Riga salvata.",
        savedEmpty:"Scrivi una riga prima di inviare.",
        archiveEmpty:"Archivio vuoto.",
        wiped:"Archivio svuotato.",
        confirmWipe:"Sicuro di voler svuotare lâ€™archivio locale?",
        warnNumbers:"Niente numeri: togli le cifre.",
        toastOk:"Salvato",
        toastWarn:"Attenzione"
      },

      en: {
        brandSub: "Local trust infrastructure",
        sec1Title:"Do Mango now",
        sec1Text:"Mango comes from real exchanges. Start simplyâ€”no numbers, no value.",
        sec1Note:"Tip: do a real act today (help, presence, skill, care), then write one line.",
        btnPrimo:"First exchange",
        btnPDF:"PDF (Multilingual)",
        btnStampa:"Print & QR",

        sec2Title:"Write one line",
        sec2Text:"One line describes a real exchange. No numbers, no value. Just a sentence.",
        rigaPh:"Write your line hereâ€¦",
        btnInvia:"Send",
        btnPulisci:"Clear",
        btnApriArchivio:"Open archive",
        btnSvuotaArchivio:"Wipe archive",
        sec2Note:"Note: the archive is local on your device (not public).",
        boxRulesTitle:"Quick rules",
        boxRulesText:"Write only what truly happened. No digits. Use Shift+Enter for a new line.",
        countLabel:"Lines in archive:",
        pdfNote:"If you want, print the QR: anyone can start from their phone.",

        sec3Title:"What is Mango",
        sec3Text:"Mango is a non-monetary, non-appropriable local trust infrastructure designed to avoid accumulation, speculation, and institutional capture. Created by Juan de Dios Annaloro Mercedes in memory of Larimar.",
        btnFondativo:"Read the founding document",
        btnFAQ:"FAQ",

        muroTitle:"Muro Mango",
        muroText:"Seven anonymous lines per language, randomly selected on each visit. No identity, no dates, no browsable archive.",
        footerTxt:"Mango â€” born on 02 February 2026",

        savedOk:"Line saved.",
        savedEmpty:"Write a line before sending.",
        archiveEmpty:"Archive is empty.",
        wiped:"Archive wiped.",
        confirmWipe:"Are you sure you want to wipe the local archive?",
        warnNumbers:"No numbers: remove digits.",
        toastOk:"Saved",
        toastWarn:"Warning"
      },

      es: {
        brandSub: "Infraestructura local de confianza",
        sec1Title:"Haz Mango ahora",
        sec1Text:"Mango nace de intercambios reales. Empieza simple: sin nÃºmeros, sin valor.",
        sec1Note:"Consejo: haz un gesto real hoy (ayuda, presencia, habilidad, cuidado) y luego escribe una lÃ­nea.",
        btnPrimo:"Primer intercambio",
        btnPDF:"PDF (MultilingÃ¼e)",
        btnStampa:"Imprimir & QR",

        sec2Title:"Escribe una lÃ­nea",
        sec2Text:"Una lÃ­nea describe un intercambio real. Sin nÃºmeros, sin valor. Solo una frase.",
        rigaPh:"Escribe tu lÃ­nea aquÃ­â€¦",
        btnInvia:"Enviar",
        btnPulisci:"Borrar",
        btnApriArchivio:"Abrir archivo",
        btnSvuotaArchivio:"Vaciar archivo",
        sec2Note:"Nota: el archivo es local en tu dispositivo (no es pÃºblico).",
        boxRulesTitle:"Reglas rÃ¡pidas",
        boxRulesText:"Escribe solo lo que ocurriÃ³ de verdad. Sin cifras. Usa Shift+Enter para saltar de lÃ­nea.",
        countLabel:"LÃ­neas en el archivo:",
        pdfNote:"Si quieres, imprime el QR: cualquiera puede empezar desde el telÃ©fono.",

        sec3Title:"QuÃ© es Mango",
        sec3Text:"Mango es una infraestructura local de confianza no monetaria, no apropiable, diseÃ±ada para evitar acumulaciÃ³n, especulaciÃ³n y captura institucional. Creado por Juan de Dios Annaloro Mercedes en memoria de Larimar.",
        btnFondativo:"Leer el documento fundacional",
        btnFAQ:"FAQ",

        muroTitle:"Muro Mango",
        muroText:"Siete lÃ­neas anÃ³nimas por idioma, elegidas al azar en cada visita. Sin identidad, sin fechas, sin archivo consultable.",
        footerTxt:"Mango â€” nacido el 02 de febrero de 2026",

        savedOk:"LÃ­nea guardada.",
        savedEmpty:"Escribe una lÃ­nea antes de enviar.",
        archiveEmpty:"Archivo vacÃ­o.",
        wiped:"Archivo vaciado.",
        confirmWipe:"Â¿Seguro que quieres vaciar el archivo local?",
        warnNumbers:"Sin nÃºmeros: quita las cifras.",
        toastOk:"Guardado",
        toastWarn:"AtenciÃ³n"
      },

      fr: {
        brandSub: "Infrastructure locale de confiance",
        sec1Title:"Fais Mango maintenant",
        sec1Text:"Mango naÃ®t des Ã©changes rÃ©els. Commence simplement â€” sans nombres, sans valeur.",
        sec1Note:"Conseil : fais un geste rÃ©el aujourdâ€™hui (aide, prÃ©sence, compÃ©tence, soin), puis Ã©cris une ligne.",
        btnPrimo:"Premier Ã©change",
        btnPDF:"PDF (Multilingue)",
        btnStampa:"Impression & QR",

        sec2Title:"Ã‰cris une ligne",
        sec2Text:"Une ligne dÃ©crit un Ã©change rÃ©el. Pas de nombres, pas de valeur. Juste une phrase.",
        rigaPh:"Ã‰cris ta ligne iciâ€¦",
        btnInvia:"Envoyer",
        btnPulisci:"Effacer",
        btnApriArchivio:"Ouvrir lâ€™archive",
        btnSvuotaArchivio:"Vider lâ€™archive",
        sec2Note:"Note : lâ€™archive est locale sur ton appareil (pas publique).",
        boxRulesTitle:"RÃ¨gles rapides",
        boxRulesText:"Ã‰cris seulement ce qui sâ€™est vraiment passÃ©. Pas de chiffres. Shift+EntrÃ©e pour aller Ã  la ligne.",
        countLabel:"Lignes dans lâ€™archive :",
        pdfNote:"Si tu veux, imprime le QR : nâ€™importe qui peut commencer depuis son tÃ©lÃ©phone.",

        sec3Title:"Quâ€™est-ce que Mango",
        sec3Text:"Mango est une infrastructure locale de confiance non monÃ©taire, non appropriable, conÃ§ue pour Ã©viter accumulation, spÃ©culation et capture institutionnelle. CrÃ©Ã©e par Juan de Dios Annaloro Mercedes en mÃ©moire de Larimar.",
        btnFondativo:"Lire le document fondateur",
        btnFAQ:"FAQ",

        muroTitle:"Muro Mango",
        muroText:"Sept lignes anonymes par langue, choisies au hasard Ã  chaque visite. Sans identitÃ©, sans dates, sans archive consultable.",
        footerTxt:"Mango â€” nÃ© le 02 fÃ©vrier 2026",

        savedOk:"Ligne enregistrÃ©e.",
        savedEmpty:"Ã‰cris une ligne avant dâ€™envoyer.",
        archiveEmpty:"Archive vide.",
        wiped:"Archive vidÃ©e.",
        confirmWipe:"Confirmer la suppression de lâ€™archive locale ?",
        warnNumbers:"Pas de nombres : enlÃ¨ve les chiffres.",
        toastOk:"EnregistrÃ©",
        toastWarn:"Attention"
      },

      de: {
        brandSub: "Lokale Vertrauens-Infrastruktur",
        sec1Title:"Mach Mango jetzt",
        sec1Text:"Mango entsteht aus echten Austauschhandlungen. Starte einfach â€” ohne Zahlen, ohne Wert.",
        sec1Note:"Tipp: Mach heute eine echte Handlung (Hilfe, PrÃ¤senz, FÃ¤higkeit, FÃ¼rsorge) und schreibe dann eine Zeile.",
        btnPrimo:"Erster Austausch",
        btnPDF:"PDF (Mehrsprachig)",
        btnStampa:"Druck & QR",

        sec2Title:"Schreibe eine Zeile",
        sec2Text:"Eine Zeile beschreibt einen echten Austausch. Keine Zahlen, kein Wert. Nur ein Satz.",
        rigaPh:"Schreibe deine Zeile hierâ€¦",
        btnInvia:"Senden",
        btnPulisci:"Leeren",
        btnApriArchivio:"Archiv Ã¶ffnen",
        btnSvuotaArchivio:"Archiv lÃ¶schen",
        sec2Note:"Hinweis: Das Archiv ist lokal auf deinem GerÃ¤t (nicht Ã¶ffentlich).",
        boxRulesTitle:"Schnellregeln",
        boxRulesText:"Schreibe nur, was wirklich passiert ist. Keine Ziffern. Shift+Enter fÃ¼r Zeilenumbruch.",
        countLabel:"Zeilen im Archiv:",
        pdfNote:"Wenn du willst, drucke den QR: Jeder kann am Handy starten.",

        sec3Title:"Was ist Mango",
        sec3Text:"Mango ist eine nicht-monetÃ¤re, nicht-aneignbare lokale Vertrauens-Infrastruktur, die Akkumulation, Spekulation und institutionelle Vereinnahmung verhindern soll. Erstellt von Juan de Dios Annaloro Mercedes im Gedenken an Larimar.",
        btnFondativo:"GrÃ¼ndungsdokument lesen",
        btnFAQ:"FAQ",

        muroTitle:"Muro Mango",
        muroText:"Sieben anonyme Zeilen pro Sprache, bei jedem Besuch zufÃ¤llig. Keine IdentitÃ¤t, keine Daten, kein durchsuchbares Archiv.",
        footerTxt:"Mango â€” entstanden am 02. Februar 2026",

        savedOk:"Zeile gespeichert.",
        savedEmpty:"Schreibe eine Zeile vor dem Senden.",
        archiveEmpty:"Archiv ist leer.",
        wiped:"Archiv gelÃ¶scht.",
        confirmWipe:"Lokales Archiv wirklich lÃ¶schen?",
        warnNumbers:"Keine Zahlen: entferne Ziffern.",
        toastOk:"Gespeichert",
        toastWarn:"Hinweis"
      },

      "zh-hant": {
        brandSub: "åœ¨åœ°ä¿¡ä»»åŸºç¤Žè¨­æ–½",
        sec1Title:"ç¾åœ¨å°±åš Mango",
        sec1Text:"Mango ä¾†è‡ªçœŸå¯¦äº¤æ›ã€‚ç°¡å–®é–‹å§‹â€”â€”ä¸ä½¿ç”¨æ•¸å­—ã€ä¸æ¨™åƒ¹å€¼ã€‚",
        sec1Note:"æç¤ºï¼šä»Šå¤©åšä¸€å€‹çœŸå¯¦çš„è¡Œå‹•ï¼ˆå”åŠ©ã€é™ªä¼´ã€æŠ€èƒ½ã€ç…§é¡§ï¼‰ï¼Œç„¶å¾Œå¯«ä¸€è¡Œã€‚",
        btnPrimo:"ç¬¬ä¸€æ¬¡äº¤æ›",
        btnPDF:"PDFï¼ˆå¤šèªžï¼‰",
        btnStampa:"åˆ—å° & QR",

        sec2Title:"å¯«ä¸€è¡Œ",
        sec2Text:"ä¸€è¡Œæè¿°ä¸€æ¬¡çœŸå¯¦äº¤æ›ã€‚ä¸ç”¨æ•¸å­—ã€ä¸ç”¨åƒ¹å€¼ã€‚åªå¯«ä¸€å¥è©±ã€‚",
        rigaPh:"åœ¨é€™è£¡å¯«ä¸‹ä½ çš„ä¸€è¡Œâ€¦",
        btnInvia:"é€å‡º",
        btnPulisci:"æ¸…é™¤",
        btnApriArchivio:"é–‹å•Ÿå­˜æª”",
        btnSvuotaArchivio:"æ¸…ç©ºå­˜æª”",
        sec2Note:"æ³¨æ„ï¼šå­˜æª”åªä¿å­˜åœ¨ä½ çš„è£ç½®ä¸Šï¼ˆä¸å…¬é–‹ï¼‰ã€‚",
        boxRulesTitle:"å¿«é€Ÿè¦å‰‡",
        boxRulesText:"åªå¯«çœŸå¯¦ç™¼ç”Ÿçš„äº‹ã€‚ä¸ç”¨æ•¸å­—ã€‚æ›è¡Œè«‹ç”¨ Shift+Enterã€‚",
        countLabel:"å­˜æª”è¡Œæ•¸ï¼š",
        pdfNote:"å¦‚æžœä½ é¡˜æ„ï¼Œå¯ä»¥åˆ—å° QRï¼šä»»ä½•äººéƒ½èƒ½å¾žæ‰‹æ©Ÿé–‹å§‹ã€‚",

        sec3Title:"ä»€éº¼æ˜¯ Mango",
        sec3Text:"Mango æ˜¯ä¸€ç¨®éžè²¨å¹£ã€ä¸å¯ä½”æœ‰çš„åœ¨åœ°ä¿¡ä»»åŸºç¤Žè¨­æ–½ï¼Œç”¨ä¾†é¿å…ç´¯ç©ã€æŠ•æ©Ÿèˆ‡åˆ¶åº¦æ€§æ•æ‰ã€‚ç”± Juan de Dios Annaloro Mercedes å‰µä½œï¼Œä»¥ç´€å¿µ Larimarã€‚",
        btnFondativo:"é–±è®€å¥ åŸºæ–‡ä»¶",
        btnFAQ:"FAQ",

        muroTitle:"Muro Mango",
        muroText:"æ¯ç¨®èªžè¨€ 7 è¡ŒåŒ¿åæ–‡å­—ï¼Œæ¯æ¬¡é€ è¨ªéš¨æ©Ÿé¡¯ç¤ºã€‚æ²’æœ‰èº«åˆ†ã€æ²’æœ‰æ—¥æœŸã€ä¸å¯ç€è¦½å­˜æª”ã€‚",
        footerTxt:"Mango â€” 2026 å¹´ 2 æœˆ 2 æ—¥èª•ç”Ÿ",

        savedOk:"å·²ä¿å­˜ã€‚",
        savedEmpty:"é€å‡ºå‰è«‹å…ˆå¯«ä¸€è¡Œã€‚",
        archiveEmpty:"å­˜æª”æ˜¯ç©ºçš„ã€‚",
        wiped:"å·²æ¸…ç©ºå­˜æª”ã€‚",
        confirmWipe:"ç¢ºå®šè¦æ¸…ç©ºæœ¬æ©Ÿå­˜æª”å—Žï¼Ÿ",
        warnNumbers:"ä¸è¦æ•¸å­—ï¼šè«‹ç§»é™¤æ•¸å­—ã€‚",
        toastOk:"å·²ä¿å­˜",
        toastWarn:"æ³¨æ„"
      }
    };

    const SUPPORTED = ["it","en","es","fr","de","zh-hant"];

    function getLang(){
      const url = new URL(window.location.href);
      const q = (url.searchParams.get("lang") || "").toLowerCase();
      if (SUPPORTED.includes(q)) return q;
      // fallback: browser
      const nav = (navigator.language || "it").toLowerCase();
      if (nav.startsWith("zh")) return "zh-hant";
      if (nav.startsWith("de")) return "de";
      if (nav.startsWith("fr")) return "fr";
      if (nav.startsWith("es")) return "es";
      if (nav.startsWith("en")) return "en";
      return "it";
    }

    function setLang(lang){
      const url = new URL(window.location.href);
      url.searchParams.set("lang", lang);
      window.location.href = url.toString();
    }

    function applyLang(lang){
      const s = STR[lang] || STR.it;

      document.documentElement.lang = lang === "zh-hant" ? "zh-Hant" : lang;

      const map = {
        brandSub: "brandSub",
        sec1Title:"sec1Title",
        sec1Text:"sec1Text",
        sec1Note:"sec1Note",
        btnPDF:"btnPDF",
        btnStampa:"btnStampa",

        sec2Title:"sec2Title",
        sec2Text:"sec2Text",
        btnInvia:"btnInvia",
        btnPulisci:"btnPulisci",
        btnApriArchivio:"btnApriArchivio",
        btnSvuotaArchivio:"btnSvuotaArchivio",
        sec2Note:"sec2Note",
        boxRulesTitle:"boxRulesTitle",
        boxRulesText:"boxRulesText",
        countLabel:"countLabel",
        pdfNote:"pdfNote",

        sec3Title:"sec3Title",
        sec3Text:"sec3Text",
        btnFondativo:"btnFondativo",
        btnFAQ:"btnFAQ",

        muroTitle:"muroTitle",
        muroText:"muroText",
        footerTxt:"footerTxt"
      };

      Object.entries(map).forEach(([k,id])=>{
        const el = document.getElementById(id);
        if (el) el.textContent = s[k];
      });

      const ta = document.getElementById("riga");
      if (ta) ta.placeholder = s.rigaPh;

      document.querySelectorAll(".chip").forEach(ch=>{
        ch.classList.toggle("active", ch.dataset.lang === lang);
      });
    }

    // -------------------------------------------------------
    // Toast + status
    // -------------------------------------------------------
    function showToast(type, lang){
      const t = document.getElementById("toastBox");
      if (!t) return;

      const s = STR[lang] || STR.it;
      t.classList.remove("good","warn","show");
      t.classList.add(type === "ok" ? "good" : "warn");
      t.textContent = (type === "ok") ? s.toastOk : s.toastWarn;

      t.classList.add("show");
      clearTimeout(window.__mangoToastT);
      window.__mangoToastT = setTimeout(()=>t.classList.remove("show"), 1200);
    }

    function showStatus(msg){
      const el = document.getElementById("statusLine");
      if (el) el.textContent = msg || "";
    }

    // -------------------------------------------------------
    // Registro unico (MIGRAZIONE + DEDUP)
    // -------------------------------------------------------
    const STORAGE_KEY = "MANGO_REGISTRO_UNICO_V1";
    const OLD_KEYS = [
      "mango_righe_v1",
      "MANGO_RIGHE_V1",
      "mangoRighe",
      "righeMango",
      "MANGO_RIGHE",
      "registroMango",
      "MANGO_REGISTRO",
      "MANGO_RIGHE_HOME",
      "MANGO_RIGHE_PRIMO"
    ];

    function safeParse(raw){
      try { return JSON.parse(raw); } catch { return null; }
    }

    function normalizeText(t){
      return (t || "")
        .replace(/\s+/g, " ")
        .trim();
    }

    function asRow(x){
      if (typeof x === "string"){
        const text = normalizeText(x);
        return text ? { text, ts: 0 } : null;
      }
      if (x && typeof x === "object"){
        const text = normalizeText(x.text || "");
        if (!text) return null;
        const ts = typeof x.ts === "number" ? x.ts : 0;
        return { text, ts };
      }
      return null;
    }

    function dedup(arr){
      const seen = new Set();
      const out = [];
      for (const r of arr){
        if (!r || !r.text) continue;
        const key = r.text.toLowerCase();
        if (seen.has(key)) continue;
        seen.add(key);
        out.push(r);
      }
      return out;
    }

    function readKey(key){
      const raw = localStorage.getItem(key);
      if (!raw) return [];
      const parsed = safeParse(raw);
      if (!parsed || !Array.isArray(parsed)) return [];
      return parsed.map(asRow).filter(Boolean);
    }

    function writeKey(key, arr){
      localStorage.setItem(key, JSON.stringify(arr));
    }

    function migrateOnce(){
      // se esiste giÃ  il key unico, non migrare
      if (localStorage.getItem(STORAGE_KEY)) return;

      let merged = [];
      for (const k of OLD_KEYS){
        merged = merged.concat(readKey(k));
      }
      merged = dedup(merged);
      writeKey(STORAGE_KEY, merged);
    }

    function readArchive(){
      migrateOnce();
      return readKey(STORAGE_KEY);
    }

    function writeArchive(arr){
      writeKey(STORAGE_KEY, arr);
    }

    function updateCount(lang){
      const s = STR[lang] || STR.it;
      const el = document.getElementById("countVal");
      if (!el) return;
      const arr = readArchive();
      el.textContent = String(arr.length);
      const lbl = document.getElementById("countLabel");
      if (lbl) lbl.textContent = s.countLabel;
    }

    // -------------------------------------------------------
    // Azioni
    // -------------------------------------------------------
    function saveLine(lang){
      const s = STR[lang] || STR.it;
      const ta = document.getElementById("riga");
      if (!ta) return;

      const text = normalizeText(ta.value);

      if (!text){
        showStatus(s.savedEmpty);
        showToast("warn", lang);
        return;
      }

      // âš ï¸ BLOCCO NUMERI: impedisce cifre (0-9)
      if (/[0-9]/.test(text)){
        showStatus(s.warnNumbers);
        showToast("warn", lang);
        return;
      }

      const arr = readArchive();
      const merged = dedup([{ text, ts: Date.now() }].concat(arr));
      writeArchive(merged);

      ta.value = "";
      updateCount(lang);

      showStatus(s.savedOk);
      showToast("ok", lang);
    }

    function openArchive(lang){
      const s = STR[lang] || STR.it;
      const arr = readArchive();
      if (!arr.length){
        showStatus(s.archiveEmpty);
        showToast("warn", lang);
        return;
      }
      // mostra fino a 30 righe (senza date, senza nomi)
      const lines = arr.slice(0,30).map(x=>`â€¢ ${x.text}`).join("\n\n");
      alert(lines + (arr.length > 30 ? `\n\nâ€¦ (+${arr.length-30})` : ""));
    }

    function wipeArchive(lang){
      const s = STR[lang] || STR.it;
      if (!confirm(s.confirmWipe)) return;
      writeArchive([]);
      updateCount(lang);
      showStatus(s.wiped);
      showToast("ok", lang);
    }

    // -------------------------------------------------------
    // Init lingua + UI
    // -------------------------------------------------------
    const lang = getLang();
    applyLang(lang);
    updateCount(lang);

    document.querySelectorAll(".chip").forEach(ch=>{
      ch.addEventListener("click", ()=> setLang(ch.dataset.lang));
    });

    document.getElementById("btnPulisci")?.addEventListener("click", ()=>{
      const ta = document.getElementById("riga");
      if (ta) ta.value = "";
      showStatus("");
      // sync bottone invia verrÃ  gestito dal blocco universale sotto
    });

    document.getElementById("btnApriArchivio")?.addEventListener("click", ()=>{
      const lang = getLang();
      openArchive(lang);
    });

    document.getElementById("btnSvuotaArchivio")?.addEventListener("click", ()=>{
      const lang = getLang();
      wipeArchive(lang);
    });

    // -------------------------------------------------------
    // Bottone INVIA universale (unico) + Enter
    // Richiede: textarea#riga e button#btnInvia
    // -------------------------------------------------------
    (() => {
      const ta = document.getElementById("riga");
      const btn = document.getElementById("btnInvia");
      if (!ta || !btn) return;

      const sync = () => { btn.disabled = ta.value.trim().length === 0; };
      sync();

      ta.addEventListener("input", sync);

      ta.addEventListener("keydown", (e) => {
        if (e.key === "Enter" && !e.shiftKey) {
          e.preventDefault();
          const lang = getLang();
          saveLine(lang);
          sync();
        }
      });

      btn.addEventListener("click", () => {
        const lang = getLang();
        saveLine(lang);
        sync();
      });
    })();
  </script>

  <!-- MURO MANGO (script esterno) -->
  <script src="muro-mango.js?v=FINAL-5"></script>
</body>
</html>
