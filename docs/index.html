<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="color-scheme" content="light" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <title>Mango</title>

  <style>
    :root{
      --bg:#ffffff;
      --fg:#111111;
      --muted:#6b7280;
      --card:#f7f7f8;
      --border:#e5e7eb;
      --radius:18px;
      --shadow:0 10px 28px rgba(0,0,0,.06);
      --max:960px;
      --font:-apple-system, system-ui, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{margin:0;font-family:var(--font);color:var(--fg);background:var(--bg)}
    a{color:inherit;text-decoration:none}

    header{
      position:sticky; top:0; z-index:10;
      background:rgba(255,255,255,.9);
      backdrop-filter:saturate(180%) blur(10px);
      border-bottom:1px solid var(--border);
    }
    .hwrap{
      max-width:var(--max);
      margin:0 auto;
      padding:14px 16px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      font-weight:900;
      font-size:22px;
      letter-spacing:-0.3px;
    }
    .mangoBtn{
      border:1px solid var(--border);
      background:#fff;
      border-radius:999px;
      padding:6px 10px;
      display:inline-flex;
      align-items:center;
      gap:6px;
      box-shadow:0 2px 10px rgba(0,0,0,.04);
      cursor:pointer;
      -webkit-tap-highlight-color: transparent;
    }

    .lang{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:flex-end;
    }
    .chip{
      border:1px solid var(--border);
      background:#fff;
      border-radius:999px;
      padding:10px 14px;
      font-weight:800;
      cursor:pointer;
      min-width:52px;
      text-align:center;
    }
    .chip[aria-current="true"]{
      outline:2px solid #111;
      outline-offset:2px;
    }

    main{max-width:var(--max); margin:0 auto; padding:18px 16px 40px}
    .hero{margin-top:10px;color:var(--muted);line-height:1.6;font-size:16px}
    .grid{display:grid;grid-template-columns:1fr;gap:16px;margin-top:14px}

    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:var(--radius);
      padding:18px;
      box-shadow:var(--shadow);
    }
    .card h1{margin:0 0 10px;font-size:28px;line-height:1.15;letter-spacing:-0.6px}
    .card h2{margin:0 0 10px;font-size:22px;letter-spacing:-0.3px}
    .card p,.card li{margin:0;color:var(--fg);line-height:1.6;font-size:16px}
    .muted{color:var(--muted)}
    ul{margin:10px 0 0 18px}
    li{margin:7px 0}
    hr{border:0;border-top:1px solid var(--border); margin:14px 0}

    textarea{
      width:100%;
      min-height:130px;
      resize:vertical;
      border:1px solid var(--border);
      border-radius:14px;
      padding:14px;
      font-size:16px;
      outline:none;
      background:#fff;
    }
    .btnrow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:12px;
      align-items:center;
    }
    .btn{
      border:0;
      background:#111;
      color:#fff;
      border-radius:14px;
      padding:12px 14px;
      font-weight:900;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:8px;
      -webkit-tap-highlight-color: transparent;
    }
    .btn.secondary{
      background:#fff;
      color:#111;
      border:1px solid var(--border);
    }
    .btn.small{padding:10px 12px;border-radius:12px;font-weight:900}

    .list{display:flex;flex-direction:column;gap:10px;margin-top:12px}
    .lineItem{background:#fff;border:1px solid var(--border);border-radius:14px;padding:12px}
    .lineMeta{
      display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;align-items:center;margin-bottom:8px
    }
    .tag{font-size:12px;color:var(--muted);font-weight:800;letter-spacing:.2px}
    .lineText{white-space:pre-wrap;font-size:16px;line-height:1.55}

    footer{
      max-width:var(--max);
      margin:0 auto;
      padding:18px 16px 40px;
      color:var(--muted);
      text-align:center;
      font-size:13px;
      line-height:1.6;
    }

    /* ‚ÄúPagina vuota‚Äù interna (stesso file) */
    .page{display:none}
    .page.active{display:block}

    /* vista blank: schermo bianco pieno */
    .blankWrap{
      height: calc(100vh - 58px); /* header approx */
      min-height: 420px;
      background:#fff;
    }
    .mangoCorner{
      position:fixed;
      right:16px;
      bottom:16px;
      border:1px solid var(--border);
      background:#fff;
      border-radius:999px;
      padding:12px 14px;
      font-size:20px;
      cursor:pointer;
      box-shadow:0 10px 28px rgba(0,0,0,.10);
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .mangoCorner:active{transform:scale(.98)}
    .blankHint{
      position:fixed;
      left:16px;
      bottom:16px;
      font-size:12px;
      color:var(--muted);
      max-width:70vw;
    }
  </style>
</head>

<body>
  <header id="top">
    <div class="hwrap">
      <div class="brand">
        <span>Mango</span>
        <!-- ü•≠ in alto: dalla HOME vai al vuoto (#blank). Dal vuoto torna alla HOME (#home). -->
        <button class="mangoBtn" id="mangoTop" title="Mango">ü•≠</button>
      </div>

      <nav class="lang" aria-label="Lingue">
        <button class="chip" data-lang="it">IT</button>
        <button class="chip" data-lang="en">EN</button>
        <button class="chip" data-lang="es">ES</button>
        <button class="chip" data-lang="fr">FR</button>
        <button class="chip" data-lang="de">DE</button>
        <button class="chip" data-lang="zh">ZH</button>
      </nav>
    </div>
  </header>

  <!-- HOME PAGE -->
  <div id="pageHome" class="page">
    <main>
      <div class="card">
        <h1 id="t_title">Mango</h1>
        <p class="hero" id="t_subtitle"></p>

        <div class="btnrow">
          <button class="btn secondary" id="btn_go_write">‚úçÔ∏è <span id="t_btn_go_write"></span></button>
          <button class="btn secondary" id="btn_go_what">‚ùì <span id="t_btn_go_what"></span></button>
          <a class="btn secondary" id="btn_primo" href="./primo-scambio.html">‚û°Ô∏è <span id="t_btn_primo"></span></a>
        </div>
      </div>

      <section class="grid">
        <article class="card" id="write">
          <h2 id="t_write_title"></h2>
          <p class="muted" id="t_write_text"></p>

          <div style="height:6px"></div>
          <textarea id="lineInput" placeholder=""></textarea>

          <div class="btnrow">
            <button class="btn" id="btn_send_keep">‚úÖ <span id="t_btn_send_keep"></span></button>
            <button class="btn secondary" id="btn_clear_field">üßΩ <span id="t_btn_clear_field"></span></button>
            <button class="btn secondary" id="btn_copy_line">üìã <span id="t_btn_copy"></span></button>
          </div>

          <p class="muted" style="margin-top:10px" id="t_write_hint"></p>
        </article>

        <article class="card" id="yourlines">
          <h2 id="t_yourlines_title"></h2>
          <p class="muted" id="t_yourlines_text"></p>

          <div class="btnrow">
            <button class="btn secondary" id="btn_delete_all">üóëÔ∏è <span id="t_btn_delete_all"></span></button>
          </div>

          <div class="list" id="linesList"></div>
          <p class="muted" id="t_empty" style="display:none;margin-top:10px"></p>
        </article>

        <article class="card" id="what">
          <h2 id="t_what_title"></h2>
          <p id="t_what_text"></p>
          <ul>
            <li id="t_what_li1"></li>
            <li id="t_what_li2"></li>
            <li id="t_what_li3"></li>
            <li id="t_what_li4"></li>
          </ul>
          <hr />
          <p class="muted" id="t_what_note"></p>

          <div class="btnrow">
            <button class="btn secondary" id="btn_top">‚¨ÜÔ∏è <span id="t_btn_top"></span></button>
          </div>
        </article>
      </section>
    </main>

    <footer>
      <div id="t_footer1"></div>
      <div><a id="pressLink" href=""></a></div>
      <div id="t_footer2"></div>
    </footer>
  </div>

  <!-- BLANK PAGE (schermo bianco) -->
  <div id="pageBlank" class="page">
    <div class="blankWrap" aria-hidden="true"></div>
    <button class="mangoCorner" id="mangoCorner" aria-label="Home">ü•≠</button>
    <div class="blankHint" id="blankHint"></div>
  </div>

  <script>
    // CONFIG
    const SUPPORTED = ["it","en","es","fr","de","zh"];
    const DEFAULT_LANG = "it";
    const STORAGE_KEY = "mango_lines_v1";
    const PRESS_EMAIL = "press@mangoinfrastruttura.org"; // <-- cambia qui se vuoi

    const T = {
      it:{
        title:"Mango",
        subtitle:"Scrivi una riga reale. Resta solo su questo dispositivo (non online).",
        btn_go_write:"Scrivi una riga",
        btn_go_what:"Cos‚Äô√® Mango",
        btn_primo:"Primo scambio",

        write_title:"Scrivi la riga",
        write_text:"Una riga umana, concreta, reale.",
        write_placeholder:"Esempio: Ioana ha ascoltato Marco. (Roma, 14 feb 2026)",
        write_hint:"Premi ‚ÄúInvia (resta sul sito)‚Äù per salvare questa riga SOLO su questo dispositivo. Poi puoi copiarla o cancellarla quando vuoi.",

        btn_send_keep:"Invia (resta sul sito)",
        btn_clear_field:"Cancella campo",
        btn_copy:"Copia",
        btn_delete_all:"Elimina tutte le righe",

        yourlines_title:"Le tue righe (solo su questo dispositivo)",
        yourlines_text:"Queste righe non sono pubbliche: sono salvate nel tuo browser.",
        empty:"Nessuna riga salvata ancora.",

        what_title:"Cos‚Äô√® Mango",
        what_text:"Mango √® un‚Äôinfrastruttura di fiducia locale non monetaria: riconosce scambi reali senza trasformarli in valore.",
        what_li1:"Una riga descrive un gesto reale. Non esiste ‚Äúsaldo‚Äù.",
        what_li2:"Non √® accumulabile nel tempo e ha una temporalit√† esplicita.",
        what_li3:"Non √® appropriabile: non deve essere possedibile o catturabile.",
        what_li4:"Se qualcuno introduce numeri o equivalenze: non √® Mango.",
        what_note:"Creato da Juan de Dios Annaloro Mercedes in memoria di Larimar. (02 febbraio 2026)",
        btn_top:"Torna su",

        press:"Giornalisti / media:",
        blank_hint:"Pagina vuota. Tocca ü•≠ per tornare alla Home.",

        footer1:"Creato da Juan de Dios Annaloro Mercedes ‚Äî 02 febbraio 2026 ‚Äî In memoria di Larimar.",
        footer2:"Mango √® praticabile e trasmissibile, ma non possedibile n√© centralizzabile."
      },
      en:{
        title:"Mango",
        subtitle:"Write your real line. It stays only on this device (not online).",
        btn_go_write:"Write a line",
        btn_go_what:"What is Mango",
        btn_primo:"First exchange",

        write_title:"Write the line",
        write_text:"One human, concrete, real line.",
        write_placeholder:"Example: Ioana listened to Marco. (Rome, Feb 14 2026)",
        write_hint:"Press ‚ÄúSend (stays on site)‚Äù to save ONLY on this device. Copy or delete whenever you want.",

        btn_send_keep:"Send (stays on site)",
        btn_clear_field:"Clear field",
        btn_copy:"Copy",
        btn_delete_all:"Delete all lines",

        yourlines_title:"Your lines (only on this device)",
        yourlines_text:"These lines are not public: they are stored in your browser.",
        empty:"No saved lines yet.",

        what_title:"What is Mango",
        what_text:"Mango is a non-monetary local trust infrastructure: it recognizes real exchanges without turning them into value.",
        what_li1:"One line describes a real gesture. There is no ‚Äúbalance‚Äù.",
        what_li2:"Not accumulable over time: explicit temporality.",
        what_li3:"Not ownable: it must not be capturable or centralized.",
        what_li4:"If someone introduces numbers or equivalences: it‚Äôs not Mango.",
        what_note:"Created by Juan de Dios Annaloro Mercedes in memory of Larimar. (02 Feb 2026)",
        btn_top:"Back to top",

        press:"Press / media:",
        blank_hint:"Blank page. Tap ü•≠ to go back Home.",

        footer1:"Created by Juan de Dios Annaloro Mercedes ‚Äî 02 Feb 2026 ‚Äî In memory of Larimar.",
        footer2:"Practicable and transmissible, but not ownable or centralizable."
      },
      es:{
        title:"Mango",
        subtitle:"Escribe tu l√≠nea real. Se queda solo en este dispositivo (no en l√≠nea).",
        btn_go_write:"Escribe una l√≠nea",
        btn_go_what:"Qu√© es Mango",
        btn_primo:"Primer intercambio",

        write_title:"Escribe la l√≠nea",
        write_text:"Una l√≠nea humana, concreta, real.",
        write_placeholder:"Ejemplo: Ioana escuch√≥ a Marco. (Roma, 14 feb 2026)",
        write_hint:"Pulsa ‚ÄúEnviar (se queda en el sitio)‚Äù para guardar SOLO en este dispositivo. Copia o borra cuando quieras.",

        btn_send_keep:"Enviar (se queda en el sitio)",
        btn_clear_field:"Borrar campo",
        btn_copy:"Copiar",
        btn_delete_all:"Eliminar todas las l√≠neas",

        yourlines_title:"Tus l√≠neas (solo en este dispositivo)",
        yourlines_text:"Estas l√≠neas no son p√∫blicas: se guardan en tu navegador.",
        empty:"A√∫n no hay l√≠neas guardadas.",

        what_title:"Qu√© es Mango",
        what_text:"Mango es una infraestructura local de confianza no monetaria: reconoce intercambios reales sin convertirlos en valor.",
        what_li1:"Una l√≠nea describe un gesto real. No existe ‚Äúsaldo‚Äù.",
        what_li2:"No acumulable en el tiempo: temporalidad expl√≠cita.",
        what_li3:"No pose√≠ble: no debe ser capturable ni centralizable.",
        what_li4:"Si alguien introduce n√∫meros o equivalencias: no es Mango.",
        what_note:"Creado por Juan de Dios Annaloro Mercedes en memoria de Larimar. (02 febrero 2026)",
        btn_top:"Volver arriba",

        press:"Prensa / medios:",
        blank_hint:"P√°gina en blanco. Toca ü•≠ para volver al inicio.",

        footer1:"Creado por Juan de Dios Annaloro Mercedes ‚Äî 02 febrero 2026 ‚Äî En memoria de Larimar.",
        footer2:"Practicable y transmisible, pero no pose√≠ble ni centralizable."
      },
      fr:{
        title:"Mango",
        subtitle:"√âcris ta ligne r√©elle. Elle reste seulement sur cet appareil (pas en ligne).",
        btn_go_write:"√âcrire une ligne",
        btn_go_what:"Qu‚Äôest-ce que Mango",
        btn_primo:"Premier √©change",

        write_title:"√âcris la ligne",
        write_text:"Une ligne humaine, concr√®te, r√©elle.",
        write_placeholder:"Exemple : Ioana a √©cout√© Marco. (Rome, 14 f√©v 2026)",
        write_hint:"Appuie sur ¬´ Envoyer (reste sur le site) ¬ª pour enregistrer UNIQUEMENT sur cet appareil. Copier ou supprimer quand tu veux.",

        btn_send_keep:"Envoyer (reste sur le site)",
        btn_clear_field:"Effacer le champ",
        btn_copy:"Copier",
        btn_delete_all:"Supprimer toutes les lignes",

        yourlines_title:"Tes lignes (uniquement sur cet appareil)",
        yourlines_text:"Ces lignes ne sont pas publiques : elles sont stock√©es dans ton navigateur.",
        empty:"Aucune ligne enregistr√©e pour l‚Äôinstant.",

        what_title:"Qu‚Äôest-ce que Mango",
        what_text:"Mango est une infrastructure locale de confiance non mon√©taire : elle reconna√Æt des √©changes r√©els sans les transformer en valeur.",
        what_li1:"Une ligne d√©crit un geste r√©el. Pas de ¬´ solde ¬ª.",
        what_li2:"Non accumulable dans le temps : temporalit√© explicite.",
        what_li3:"Non poss√©dable : pas de capture ni centralisation.",
        what_li4:"Si quelqu‚Äôun introduit des chiffres ou √©quivalences : ce n‚Äôest pas Mango.",
        what_note:"Cr√©√© par Juan de Dios Annaloro Mercedes ‚Äî en m√©moire de Larimar. (02 f√©vrier 2026)",
        btn_top:"Haut de page",

        press:"Presse / m√©dias :",
        blank_hint:"Page blanche. Appuie sur ü•≠ pour revenir √† l‚Äôaccueil.",

        footer1:"Cr√©√© par Juan de Dios Annaloro Mercedes ‚Äî 02 f√©vrier 2026 ‚Äî En m√©moire de Larimar.",
        footer2:"Praticable et transmissible, mais non poss√©dable ni centralisable."
      },
      de:{
        title:"Mango",
        subtitle:"Schreibe deine reale Zeile. Sie bleibt nur auf diesem Ger√§t (nicht online).",
        btn_go_write:"Zeile schreiben",
        btn_go_what:"Was ist Mango",
        btn_primo:"Erster Austausch",

        write_title:"Schreibe die Zeile",
        write_text:"Eine menschliche, konkrete, reale Zeile.",
        write_placeholder:"Beispiel: Ioana h√∂rte Marco zu. (Rom, 14 Feb 2026)",
        write_hint:"Klicke ‚ÄûSenden (bleibt auf der Seite)‚Äú, um NUR auf diesem Ger√§t zu speichern. Kopieren oder l√∂schen, wann du willst.",

        btn_send_keep:"Senden (bleibt auf der Seite)",
        btn_clear_field:"Feld l√∂schen",
        btn_copy:"Kopieren",
        btn_delete_all:"Alle Zeilen l√∂schen",

        yourlines_title:"Deine Zeilen (nur auf diesem Ger√§t)",
        yourlines_text:"Diese Zeilen sind nicht √∂ffentlich: sie werden im Browser gespeichert.",
        empty:"Noch keine gespeicherten Zeilen.",

        what_title:"Was ist Mango",
        what_text:"Mango ist eine nicht-monet√§re lokale Vertrauens-Infrastruktur: sie erkennt reale Austausche an, ohne sie in Wert zu verwandeln.",
        what_li1:"Eine Zeile beschreibt eine reale Geste. Kein ‚ÄûSaldo‚Äú.",
        what_li2:"Nicht akkumuliert √ºber Zeit: explizite Temporalit√§t.",
        what_li3:"Nicht besitzbar: keine Vereinnahmung oder Zentralisierung.",
        what_li4:"Wenn jemand Zahlen oder √Ñquivalenzen einf√ºhrt: nicht Mango.",
        what_note:"Erstellt von Juan de Dios Annaloro Mercedes ‚Äî in Erinnerung an Larimar. (02. Feb 2026)",
        btn_top:"Nach oben",

        press:"Presse / Medien:",
        blank_hint:"Leere Seite. Tippe ü•≠, um zur Startseite zur√ºckzukehren.",

        footer1:"Erstellt von Juan de Dios Annaloro Mercedes ‚Äî 02. Feb 2026 ‚Äî In Erinnerung an Larimar.",
        footer2:"Praktizierbar und √ºbertragbar, aber nicht besitzbar oder zentralisierbar."
      },
      zh:{
        title:"Mango",
        subtitle:"ÂÜô‰∏ã‰Ω†ÁöÑÁúüÂÆûËÆ∞ÂΩï„ÄÇÂÆÉÂè™‰øùÂ≠òÂú®Êú¨ËÆæÂ§áÔºà‰∏çÂú®Á∫øÔºâ„ÄÇ",
        btn_go_write:"ÂÜô‰∏ã‰∏ÄË°å",
        btn_go_what:"Mango ÊòØ‰ªÄ‰πà",
        btn_primo:"Á¨¨‰∏ÄÊ¨°‰∫§Êç¢",

        write_title:"ÂÜô‰∏ãËøô‰∏ÄË°å",
        write_text:"‰∏ÄË°å‰∫∫ÊÄßÁöÑ„ÄÅÂÖ∑‰ΩìÁöÑ„ÄÅÁúüÂÆûÁöÑËÆ∞ÂΩï„ÄÇ",
        write_placeholder:"‰æãÔºöIoana Âê¨ Marco ËØ¥ËØù„ÄÇÔºàÁΩóÈ©¨Ôºå2026Âπ¥2Êúà14Êó•Ôºâ",
        write_hint:"ÁÇπÂáª‚ÄúÂèëÈÄÅÔºà‰øùÁïôÂú®ÁΩëÁ´ôÔºâ‚ÄùÂç≥ÂèØ‰ªÖ‰øùÂ≠òÂú®Êú¨ËÆæÂ§á„ÄÇ‰πãÂêé‰Ω†ÂèØ‰ª•ÈöèÊó∂Â§çÂà∂ÊàñÂà†Èô§„ÄÇ",

        btn_send_keep:"ÂèëÈÄÅÔºà‰øùÁïôÂú®ÁΩëÁ´ôÔºâ",
        btn_clear_field:"Ê∏ÖÁ©∫ËæìÂÖ•",
        btn_copy:"Â§çÂà∂",
        btn_delete_all:"Âà†Èô§ÊâÄÊúâËÆ∞ÂΩï",

        yourlines_title:"‰Ω†ÁöÑËÆ∞ÂΩïÔºà‰ªÖÂú®Êú¨ËÆæÂ§áÔºâ",
        yourlines_text:"Ëøô‰∫õËÆ∞ÂΩï‰∏çÂÖ¨ÂºÄÔºö‰ªÖÂ≠òÂÇ®Âú®‰Ω†ÁöÑÊµèËßàÂô®‰∏≠„ÄÇ",
        empty:"ËøòÊ≤°Êúâ‰øùÂ≠òÁöÑËÆ∞ÂΩï„ÄÇ",

        what_title:"Mango ÊòØ‰ªÄ‰πà",
        what_text:"Mango ÊòØ‰∏ÄÁßçÈùûË¥ßÂ∏ÅÂåñÁöÑÊú¨Âú∞‰ø°‰ªªÂü∫Á°ÄËÆæÊñΩÔºöÊâøËÆ§ÁúüÂÆû‰∫§Êç¢Ôºå‰ΩÜ‰∏çÊääÂÆÉÂèòÊàê‰ª∑ÂÄº„ÄÇ",
        what_li1:"‰∏ÄË°åÊèèËø∞‰∏Ä‰∏™ÁúüÂÆû‰∏æÂä®„ÄÇÊ≤°Êúâ‚Äú‰ΩôÈ¢ù‚Äù„ÄÇ",
        what_li2:"‰∏çÂèØÈöèÊó∂Èó¥Á¥ØÁßØÔºöÂÖ∑ÊúâÊòéÁ°ÆÁöÑÊó∂Èó¥ÊÄß„ÄÇ",
        what_li3:"‰∏çÂèØË¢´Êã•ÊúâÔºö‰∏çËÉΩË¢´ÊçïËé∑Êàñ‰∏≠ÂøÉÂåñ„ÄÇ",
        what_li4:"Â¶ÇÊûúÊúâ‰∫∫ÂºïÂÖ•Êï∞Â≠óÊàñÁ≠â‰ª∑ÔºöÈÇ£Â∞±‰∏çÊòØ Mango„ÄÇ",
        what_note:"Áî± Juan de Dios Annaloro Mercedes ÂàõÂª∫Ôºå‰ª•Á∫™Âøµ Larimar„ÄÇÔºà2026Âπ¥2Êúà2Êó•Ôºâ",
        btn_top:"ÂõûÂà∞È°∂ÈÉ®",

        press:"Â™í‰Ωì / ËÆ∞ËÄÖÔºö",
        blank_hint:"Á©∫ÁôΩÈ°µÈù¢„ÄÇÁÇπÂáª ü•≠ ËøîÂõûÈ¶ñÈ°µ„ÄÇ",

        footer1:"Áî± Juan de Dios Annaloro Mercedes ÂàõÂª∫ ‚Äî 2026Âπ¥2Êúà2Êó• ‚Äî Á∫™Âøµ Larimar„ÄÇ",
        footer2:"ÂèØÂÆûË∑µ‰∏é‰º†ÈÄíÔºå‰ΩÜ‰∏çÂèØË¢´Êã•ÊúâÊàñ‰∏≠ÂøÉÂåñ„ÄÇ"
      }
    };

    // lang helpers
    function getLang(){
      const u = new URL(location.href);
      const l = (u.searchParams.get("lang") || "").toLowerCase();
      return SUPPORTED.includes(l) ? l : DEFAULT_LANG;
    }
    function setLang(l){
      const u = new URL(location.href);
      u.searchParams.set("lang", l);
      history.replaceState({}, "", u.toString());
    }
    function withLang(path){
      const l = getLang();
      const base = new URL(path, location.href);
      base.searchParams.set("lang", l);
      return base.pathname + "?" + base.searchParams.toString() + (base.hash || "");
    }

    // routing home/blank in SAME FILE
    function showPage(which){
      const home = document.getElementById("pageHome");
      const blank = document.getElementById("pageBlank");
      home.classList.remove("active");
      blank.classList.remove("active");
      if(which === "blank") blank.classList.add("active");
      else home.classList.add("active");
    }
    function route(){
      const h = (location.hash || "#home").toLowerCase();
      if(h === "#blank") showPage("blank");
      else showPage("home");
    }

    // storage
    function loadLines(){
      try{
        const raw = localStorage.getItem(STORAGE_KEY);
        const arr = raw ? JSON.parse(raw) : [];
        return Array.isArray(arr) ? arr : [];
      }catch(_){ return []; }
    }
    function saveLines(arr){ localStorage.setItem(STORAGE_KEY, JSON.stringify(arr)); }

    // render list
    function renderLines(){
      const list = document.getElementById("linesList");
      const empty = document.getElementById("t_empty");
      const arr = loadLines();

      list.innerHTML = "";
      if(!arr.length){
        empty.style.display = "block";
        return;
      }
      empty.style.display = "none";

      arr.forEach((item, idx)=>{
        const box = document.createElement("div");
        box.className = "lineItem";

        const meta = document.createElement("div");
        meta.className = "lineMeta";

        const tag = document.createElement("div");
        tag.className = "tag";
        const dt = item && item.ts ? new Date(item.ts) : new Date();
        tag.textContent = dt.toLocaleString();

        const actions = document.createElement("div");
        actions.className = "btnrow";
        actions.style.margin = "0";
        actions.style.gap = "8px";

        const bCopy = document.createElement("button");
        bCopy.className = "btn secondary small";
        bCopy.type = "button";
        bCopy.textContent = "üìã";
        bCopy.title = "Copy";
        bCopy.addEventListener("click", async ()=>{
          const text = (item && item.text) ? item.text : "";
          if(!text) return;
          try{ await navigator.clipboard.writeText(text); }
          catch(_){
            const ta = document.getElementById("lineInput");
            if(ta){
              ta.value = text;
              ta.focus();
              ta.select();
              try{ document.execCommand("copy"); }catch(__){}
            }
          }
        });

        const bDel = document.createElement("button");
        bDel.className = "btn secondary small";
        bDel.type = "button";
        bDel.textContent = "üóëÔ∏è";
        bDel.title = "Delete";
        bDel.addEventListener("click", ()=>{
          const arr2 = loadLines();
          arr2.splice(idx, 1);
          saveLines(arr2);
          renderLines();
        });

        actions.appendChild(bCopy);
        actions.appendChild(bDel);

        meta.appendChild(tag);
        meta.appendChild(actions);

        const text = document.createElement("div");
        text.className = "lineText";
        text.textContent = (item && item.text) ? item.text : "";

        box.appendChild(meta);
        box.appendChild(text);
        list.appendChild(box);
      });
    }

    function goTop(){
      try{ window.scrollTo({top:0,left:0,behavior:"smooth"}); }
      catch(_){ window.scrollTo(0,0); }
    }

    // apply translations
    function apply(l){
      document.documentElement.lang = l;
      document.querySelectorAll(".chip").forEach(b=>{
        b.setAttribute("aria-current", b.dataset.lang === l ? "true" : "false");
      });
      const d = T[l] || T[DEFAULT_LANG];

      // home texts
      document.getElementById("t_title").textContent = d.title;
      document.getElementById("t_subtitle").textContent = d.subtitle;

      document.getElementById("t_btn_go_write").textContent = d.btn_go_write;
      document.getElementById("t_btn_go_what").textContent = d.btn_go_what;
      document.getElementById("t_btn_primo").textContent = d.btn_primo;

      document.getElementById("t_write_title").textContent = d.write_title;
      document.getElementById("t_write_text").textContent = d.write_text;
      document.getElementById("lineInput").placeholder = d.write_placeholder;
      document.getElementById("t_write_hint").textContent = d.write_hint;

      document.getElementById("t_btn_send_keep").textContent = d.btn_send_keep;
      document.getElementById("t_btn_clear_field").textContent = d.btn_clear_field;
      document.getElementById("t_btn_copy").textContent = d.btn_copy;
      document.getElementById("t_btn_delete_all").textContent = d.btn_delete_all;

      document.getElementById("t_yourlines_title").textContent = d.yourlines_title;
      document.getElementById("t_yourlines_text").textContent = d.yourlines_text;
      document.getElementById("t_empty").textContent = d.empty;

      document.getElementById("t_what_title").textContent = d.what_title;
      document.getElementById("t_what_text").textContent = d.what_text;
      document.getElementById("t_what_li1").textContent = d.what_li1;
      document.getElementById("t_what_li2").textContent = d.what_li2;
      document.getElementById("t_what_li3").textContent = d.what_li3;
      document.getElementById("t_what_li4").textContent = d.what_li4;
      document.getElementById("t_what_note").textContent = d.what_note;
      document.getElementById("t_btn_top").textContent = d.btn_top;

      document.getElementById("t_footer1").textContent = d.footer1;
      document.getElementById("t_footer2").textContent = d.footer2;

      // press email link
      const a = document.getElementById("pressLink");
      a.textContent = (d.press || "Press:") + " " + PRESS_EMAIL;
      a.href = "mailto:" + PRESS_EMAIL;

      // blank hint
      document.getElementById("blankHint").textContent = d.blank_hint || "";

      // link primo scambio con lang
      document.getElementById("btn_primo").href = withLang("./primo-scambio.html");

      document.title = "Mango";
    }

    // INIT
    (function init(){
      // language buttons
      document.querySelectorAll(".chip").forEach(b=>{
        b.addEventListener("click", ()=>{
          const l = b.dataset.lang;
          setLang(l);
          apply(l);
        });
      });

      // routing
      window.addEventListener("hashchange", route);

      // ü•≠ top: toggle home<->blank
      document.getElementById("mangoTop").addEventListener("click", ()=>{
        if((location.hash || "#home").toLowerCase() === "#blank") location.hash = "#home";
        else location.hash = "#blank";
        route();
        goTop();
      });

      // ü•≠ bottom-right in blank: go home
      document.getElementById("mangoCorner").addEventListener("click", ()=>{
        location.hash = "#home";
        route();
        goTop();
      });

      // nav buttons
      document.getElementById("btn_go_write")?.addEventListener("click", ()=>{
        document.getElementById("write")?.scrollIntoView({behavior:"smooth", block:"start"});
      });
      document.getElementById("btn_go_what")?.addEventListener("click", ()=>{
        document.getElementById("what")?.scrollIntoView({behavior:"smooth", block:"start"});
      });
      document.getElementById("btn_top")?.addEventListener("click", goTop);

      // actions
      document.getElementById("btn_send_keep")?.addEventListener("click", ()=>{
        const ta = document.getElementById("lineInput");
        const text = (ta?.value || "").trim();
        if(!text) return;
        const arr = loadLines();
        arr.unshift({ text, ts: Date.now() });
        saveLines(arr);
        renderLines();
        if(ta) ta.value = "";
        document.getElementById("yourlines")?.scrollIntoView({behavior:"smooth", block:"start"});
      });

      document.getElementById("btn_clear_field")?.addEventListener("click", ()=>{
        const ta = document.getElementById("lineInput");
        if(ta) ta.value = "";
      });

      document.getElementById("btn_copy_line")?.addEventListener("click", async ()=>{
        const ta = document.getElementById("lineInput");
        const text = (ta?.value || "").trim();
        if(!text) return;
        try{ await navigator.clipboard.writeText(text); }
        catch(_){
          if(ta){
            ta.focus(); ta.select();
            try{ document.execCommand("copy"); }catch(__){}
          }
        }
      });

      document.getElementById("btn_delete_all")?.addEventListener("click", ()=>{
        saveLines([]);
        renderLines();
      });

      // boot
      const l = getLang();
      apply(l);
      renderLines();

      // default route
      if(!location.hash) location.hash = "#home";
      route();
    })();
  </script>
</body>
</html>
