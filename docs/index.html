<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mango â€” Infrastruttura di fiducia locale</title>

  <style>
    :root{
      --bg:#0b0b0c;
      --card:#121214;
      --text:#ffffff;
      --muted:#b8b8b8;
      --line:#2a2a2f;
      --accent:#2d6cdf;
      --accent2:#22c55e;
      --danger:#ef4444;
      --radius:16px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      background:var(--bg);
      color:var(--text);
      line-height:1.35;
    }
    a{color:inherit}
    .wrap{
      max-width:980px;
      margin:0 auto;
      padding:20px 16px 40px;
    }
    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:10px 0 18px;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      font-weight:800;
      letter-spacing:0.2px;
      font-size:18px;
    }
    .brand .emoji{font-size:22px}
    .langbar{
      display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-end;
    }
    .chip{
      border:1px solid var(--line);
      background:transparent;
      color:var(--text);
      padding:8px 10px;
      border-radius:999px;
      font-size:13px;
      cursor:pointer;
    }
    .chip.active{
      border-color:var(--accent);
      box-shadow:0 0 0 2px rgba(45,108,223,.18) inset;
    }

    .hero{
      background:linear-gradient(180deg, rgba(45,108,223,.18), rgba(45,108,223,.05));
      border:1px solid var(--line);
      border-radius:var(--radius);
      padding:18px 16px;
      margin-bottom:14px;
    }
    .hero h1{
      margin:0 0 8px;
      font-size:28px;
      line-height:1.15;
    }
    .hero p{
      margin:0;
      color:var(--muted);
      font-size:15px;
    }

    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap:12px;
    }
    @media (min-width: 860px){
      .grid{ grid-template-columns: 1fr 1fr; }
      .full{ grid-column: 1 / -1; }
    }
    .card{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius);
      padding:16px;
    }
    .card h2{
      margin:0 0 10px;
      font-size:18px;
    }
    .card p, .card li{
      color:var(--muted);
      font-size:14px;
    }
    .card ul{margin:10px 0 0; padding-left:18px}

    .btnrow{display:flex; flex-wrap:wrap; gap:10px; margin-top:12px}
    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      padding:12px 14px;
      border-radius:12px;
      border:1px solid var(--line);
      background:transparent;
      color:var(--text);
      font-weight:700;
      font-size:14px;
      text-decoration:none;
      cursor:pointer;
    }
    .btn.primary{
      background:var(--accent);
      border-color:transparent;
    }
    .btn.good{
      background:rgba(34,197,94,.16);
      border-color:rgba(34,197,94,.35);
    }
    .btn.danger{
      background:rgba(239,68,68,.12);
      border-color:rgba(239,68,68,.35);
    }

    .field{
      display:flex;
      flex-direction:column;
      gap:8px;
      margin-top:10px;
    }
    textarea{
      width:100%;
      min-height:110px;
      resize:vertical;
      border-radius:14px;
      border:1px solid var(--line);
      background:#0e0e10;
      color:var(--text);
      padding:12px;
      font-size:14px;
      outline:none;
    }
    textarea:focus{border-color:rgba(45,108,223,.65)}
    .meta{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      margin-top:8px;
      color:var(--muted);
      font-size:13px;
    }
    .status{
      margin-top:10px;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid var(--line);
      background:#0e0e10;
      color:var(--muted);
      font-size:13px;
      display:none;
    }
    .status.show{display:block}
    footer{
      margin-top:18px;
      color:var(--muted);
      font-size:12px;
      text-align:center;
    }
    .smallnote{font-size:12px; color:var(--muted); margin-top:8px}
    .divider{height:1px;background:var(--line);margin:12px 0}

    /* Toast (verde/rosso) */
    .toast{
      position:fixed;
      left:50%;
      bottom:22px;
      transform:translateX(-50%);
      z-index:9999;
      padding:12px 14px;
      border-radius:16px;
      font-weight:900;
      box-shadow:0 10px 24px rgba(0,0,0,.22);
      opacity:0;
      pointer-events:none;
      transition:opacity .18s ease, transform .18s ease;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(17,17,17,.92);
      color:#fff;
    }
    .toast.show{
      opacity:1;
      transform:translateX(-50%) translateY(-4px);
    }
    .toast.good{
      background:rgba(34,197,94,.18);
      border-color:rgba(34,197,94,.35);
      color:#eafff2;
    }
    .toast.warn{
      background:rgba(239,68,68,.16);
      border-color:rgba(239,68,68,.35);
      color:#ffecec;
    }
  </style>
</head>

<body>




<div class="wrap">
  

    <header>
      <div class="brand">
  <a href="./Bianco.html" style="text-decoration:none;">
    <span class="emoji">ğŸ¥­</span>
  </a>
  <span id="brandTitle">Mango</span>
</div>


      <div class="langbar" aria-label="Language selector">
        <button class="chip" data-lang="it">IT</button>
        <button class="chip" data-lang="en">EN</button>
        <button class="chip" data-lang="es">ES</button>
        <button class="chip" data-lang="fr">FR</button>
        <button class="chip" data-lang="de">DE</button>
        <button class="chip" data-lang="zh">ä¸­æ–‡</button>
      </div>
    </header>

    <section class="hero">
      <h1 id="heroTitle">Mango â€” infrastruttura di fiducia locale</h1>
      <p id="heroSub">
        Non monetaria, non appropriabile, anti-accumulo, anti-cattura. Nata il 02 febbraio 2026.
      </p>
    </section>

    <section class="grid">
      <!-- 1) FAI MANGO ADESSO -->
      <div class="card">
        <h2 id="sec1Title">Fai Mango adesso</h2>
        <p id="sec1Text">
        Mango nasce da scambi reali tra persone. Non Ã¨ denaro. Non si conta. Non si accumula.
</p>

<p style="margin-top:8px; font-weight:700;">
  Scrivi una riga. Ãˆ giÃ  Mango ğŸ¥­
</p>
    
        
        
        <div class="btnrow">
          <a class="btn primary" id="btnPrimoScambio" href="#scrivi">ğŸ¥­ <span id="btnPrimoScambioTxt">Fai il primo scambio</span></a>
          <a class="btn" id="btnFAQ" href="faq.html">â“ <span id="btnFAQTxt">FAQ</span></a>
        </div>
        <div class="smallnote" id="sec1Note" style="display:none"></div>
      </div>

      <!-- 2) SCRIVI UNA RIGA -->
      <div class="card" id="scrivi">
        <h2 id="sec2Title">Scrivi una riga</h2>
        <p id="sec2Text">
          Una riga = riconoscimento di uno scambio reale. Nessun numero, nessun valore.
        </p>

        <div class="field">
          <label for="riga" id="rigaLabel" style="color:var(--muted); font-size:13px;">
            Descrivi lo scambio (breve, umano, chiaro):
          </label>
          <textarea id="riga" placeholder="Es: Ho aiutato a portare la spesa; in cambio ho ricevuto un passaggio."></textarea>

          <div class="btnrow">
            <button class="btn good" id="btnInvia" type="button">ğŸ“© <span id="btnInviaTxt">Invia / Salva</span></button>
            <button class="btn danger" id="btnPulisci" type="button">ğŸ§¹ <span id="btnPulisciTxt">Pulisci</span></button>
          </div>

          <div class="meta">
            <div id="metaCount">0 righe salvate su questo dispositivo</div>
            <div id="metaHint">Suggerimento: premi anche Invio (âŒ…) per salvare.</div>
          </div>

          <div class="status" id="statusBox"></div>
        </div>

        <div class="divider"></div>
        <div class="btnrow">
          <button class="btn" id="btnApriArchivio" type="button">ğŸ“š <span id="btnApriArchivioTxt">Vedi righe salvate</span></button>
          <button class="btn danger" id="btnSvuotaArchivio" type="button">ğŸ—‘ï¸ <span id="btnSvuotaArchivioTxt">Svuota archivio</span></button>
        </div>
        <div class="smallnote" id="sec2Note">
          Salvataggio locale (telefono/PC). Se vuoi anche invio online, serve un backend o un form esterno.
        </div>
      </div>

      <!-- 3) COS'Ãˆ MANGO -->
      <div class="card full">
        <h2 id="sec3Title">Cosâ€™Ã¨ Mango</h2>
        <p id="sec3Text">
          Mango Ã¨ unâ€™infrastruttura di fiducia locale non monetaria: riconosce scambi reali senza trasformarli in quantitÃ , valore o accumulo.
          Creato da Juan de Dios Annaloro Mercedes in memoria di sua sorella Larimar.
        </p>

        <div class="btnrow">
          <a class="btn primary" id="btnPDF" href="pdf/Mango_Documento_Fondativo_Multilingua_v1.pdf" target="_blank" rel="noopener">
            ğŸ“„ <span id="btnPDFTxt">Documento Fondativo Ufficiale (Multilingua)</span>
          </a>
        </div>

<div class="btnrow">
  <a href="QR_MANGO_UFFICIALE.pdf"
     target="_blank"
     rel="noopener noreferrer external"
     class="btn">
     Stampa & QR
  </a>
</div>

<div class="smallnote" id="pdfNote">
      </div>
    </section>
  <section id="muro-mango" class="muro-mango">
  <h2>Muro Mango</h2>

  <div class="muro-grid">

    <div class="muro-box" lang="it">
      <div class="muro-lang">IT</div>
      <p class="muro-desc">
        Le righe che seguono descrivono scambi reali avvenuti tra persone.
        Non indicano identitÃ , quantitÃ  o temporalitÃ . Mostrano che Mango accade.
      </p>
      <ul class="muro-list" data-lang="it">
        <li>Qualcuno ha accompagnato qualcuno a una visita.</li>
        <li>Qualcuno ha prestato ascolto a qualcuno.</li>
      </ul>
    </div>

    <div class="muro-box" lang="en">
      <div class="muro-lang">EN</div>
      <p class="muro-desc">
        The lines below describe real exchanges between people.
        They show no identity, quantity, or timeline. They show Mango happens.
      </p>
      <ul class="muro-list" data-lang="en">
        <li>Someone accompanied someone to an appointment.</li>
        <li>Someone listened to someone.</li>
      </ul>
    </div>

    <div class="muro-box" lang="es">
      <div class="muro-lang">ES</div>
      <p class="muro-desc">
        Las lÃ­neas abajo describen intercambios reales entre personas.
        No muestran identidad, cantidad ni temporalidad. Muestran que Mango sucede.
      </p>
      <ul class="muro-list" data-lang="es">
        <li>Alguien acompaÃ±Ã³ a alguien a una cita.</li>
        <li>Alguien escuchÃ³ a alguien.</li>
      </ul>
    </div>

    <div class="muro-box" lang="fr">
      <div class="muro-lang">FR</div>
      <p class="muro-desc">
        Les lignes ci-dessous dÃ©crivent des Ã©changes rÃ©els entre personnes.
        Elles nâ€™indiquent ni identitÃ©, ni quantitÃ©, ni temporalitÃ©. Elles montrent que Mango arrive.
      </p>
      <ul class="muro-list" data-lang="fr">
        <li>Quelquâ€™un a accompagnÃ© quelquâ€™un Ã  un rendez-vous.</li>
        <li>Quelquâ€™un a Ã©coutÃ© quelquâ€™un.</li>
      </ul>
    </div>

    <div class="muro-box" lang="de">
      <div class="muro-lang">DE</div>
      <p class="muro-desc">
        Die folgenden Zeilen beschreiben echte Austausche zwischen Menschen.
        Keine IdentitÃ¤t, keine Menge, keine Zeitlinie. Sie zeigen: Mango passiert.
      </p>
      <ul class="muro-list" data-lang="de">
        <li>Jemand hat jemanden zu einem Termin begleitet.</li>
        <li>Jemand hat jemandem zugehÃ¶rt.</li>
      </ul>
    </div>

    <div class="muro-box" lang="zh-Hant">
      <div class="muro-lang">ä¸­æ–‡</div>
      <p class="muro-desc">
        ä»¥ä¸‹æ–‡å­—æè¿°äººèˆ‡äººä¹‹é–“ç™¼ç”Ÿéçš„çœŸå¯¦äº¤æ›ã€‚
        ä¸å‘ˆç¾èº«åˆ†ã€ä¸å‘ˆç¾æ•¸é‡ã€ä¹Ÿä¸å‘ˆç¾æ™‚é–“ç·šã€‚å®ƒå€‘åªè¡¨ç¤ºï¼šMango æ­£åœ¨ç™¼ç”Ÿã€‚
      </p>
      <ul class="muro-list" data-lang="zh-Hant">
        <li>æœ‰äººé™ªåŒæŸäººå»çœ‹è¨ºã€‚</li>
        <li>æœ‰äººå‚¾è½äº†æŸäººã€‚</li>
      </ul>
    </div>

  </div>
</section>
<section id="muro-mango" class="muro-mango">
  <h2>Muro Mango</h2>

  <div class="muro-grid">

    <div class="muro-box" lang="it">
      <div class="muro-lang">IT</div>
      <p class="muro-desc">
        Le righe che seguono descrivono scambi reali avvenuti tra persone.
        Non indicano identitÃ , quantitÃ  o temporalitÃ . Mostrano che Mango accade.
      </p>
      <ul class="muro-list" data-lang="it"></ul>
    </div>

    <div class="muro-box" lang="en">
      <div class="muro-lang">EN</div>
      <p class="muro-desc">
        The lines below describe real exchanges between people.
        They show no identity, quantity, or timeline. They show Mango happens.
      </p>
      <ul class="muro-list" data-lang="en"></ul>
    </div>

    <div class="muro-box" lang="es">
      <div class="muro-lang">ES</div>
      <p class="muro-desc">
        Las lÃ­neas abajo describen intercambios reales entre personas.
        No muestran identidad, cantidad ni temporalidad. Muestran que Mango sucede.
      </p>
      <ul class="muro-list" data-lang="es"></ul>
    </div>

    <div class="muro-box" lang="fr">
      <div class="muro-lang">FR</div>
      <p class="muro-desc">
        Les lignes ci-dessous dÃ©crivent des Ã©changes rÃ©els entre personnes.
        Elles nâ€™indiquent ni identitÃ©, ni quantitÃ©, ni temporalitÃ©. Elles montrent que Mango arrive.
      </p>
      <ul class="muro-list" data-lang="fr"></ul>
    </div>

    <div class="muro-box" lang="de">
      <div class="muro-lang">DE</div>
      <p class="muro-desc">
        Die folgenden Zeilen beschreiben echte Austausche zwischen Menschen.
        Keine IdentitÃ¤t, keine Menge, keine Zeitlinie. Sie zeigen: Mango passiert.
      </p>
      <ul class="muro-list" data-lang="de"></ul>
    </div>

    <div class="muro-box" lang="zh-Hant">
      <div class="muro-lang">ä¸­æ–‡</div>
      <p class="muro-desc">
        ä»¥ä¸‹æ–‡å­—æè¿°äººèˆ‡äººä¹‹é–“ç™¼ç”Ÿéçš„çœŸå¯¦äº¤æ›ã€‚
        ä¸å‘ˆç¾èº«åˆ†ã€ä¸å‘ˆç¾æ•¸é‡ã€ä¹Ÿä¸å‘ˆç¾æ™‚é–“ç·šã€‚å®ƒå€‘åªè¡¨ç¤ºï¼šMango æ­£åœ¨ç™¼ç”Ÿã€‚
      </p>
      <ul class="muro-list" data-lang="zh-Hant"></ul>
    </div>

  </div>
</section>
    <footer id="footerTxt">
      Mango â€” nato il 02 febbraio 2026. Infrastruttura non monetaria, non appropriabile, anti-accumulo, anti-cattura.
    </footer>

  </div>

  <!-- Toast unico (cambia testo e colore) -->
  <div class="toast" id="toastBox">Riga riconosciuta</div>

  <script>
    const STR = {
      it: {
        brandTitle: "Mango",
        heroTitle: "Mango â€” infrastruttura di fiducia locale",
        heroSub: "Non monetaria, non appropriabile, anti-accumulo, anti-cattura. Nata il 02 febbraio 2026.",
        sec1Title: "Fai Mango adesso",
        sec1Text: "Mango nasce da scambi reali tra persone. Non Ã¨ denaro. Non si conta. Non si accumula.",
        btnPrimoScambioTxt: "Fai il primo scambio",
        btnFAQTxt: "FAQ",
        sec2Title: "Scrivi una riga",
        sec2Text: "Una riga = riconoscimento di uno scambio reale. Nessun numero, nessun valore.",
        rigaLabel: "Descrivi lo scambio (breve, umano, chiaro):",
        rigaPh: "Es: Ho aiutato a portare la spesa; in cambio ho ricevuto un passaggio.",
        btnInviaTxt: "Invia / Salva",
        btnPulisciTxt: "Pulisci",
        metaHint: "Suggerimento: premi anche Invio (âŒ…) per salvare.",
        btnApriArchivioTxt: "Vedi righe salvate",
        btnSvuotaArchivioTxt: "Svuota archivio",
        sec2Note: "Salvataggio locale (telefono/PC). Se vuoi anche invio online, serve un backend o un form esterno.",
        sec3Title: "Cosâ€™Ã¨ Mango",
        sec3Text: "Mango Ã¨ unâ€™infrastruttura di fiducia locale non monetaria: riconosce scambi reali senza trasformarli in quantitÃ , valore o accumulo. Creato da Juan de Dios Annaloro Mercedes in memoria di sua sorella Larimar.",
        btnPDFTxt: "Documento Fondativo Ufficiale (Multilingua)",
        footerTxt: "Mango â€” nato il 02 febbraio 2026. Infrastruttura non monetaria, non appropriabile, anti-accumulo, anti-cattura.",
        savedOk: "Salvato âœ…",
        savedEmpty: "Scrivi qualcosa prima di salvare.",
        cleared: "Campo pulito.",
        archiveEmpty: "Archivio vuoto (nessuna riga salvata su questo dispositivo).",
        confirmWipe: "Sicuro di voler cancellare TUTTE le righe salvate su questo dispositivo?",
        wiped: "Archivio cancellato.",
        toastOk: "Riga riconosciuta",
        warnNumbers: "âš ï¸ Mango non si conta. Cerca di rispettare te stesso."
      },
      en: {
        brandTitle: "Mango",
        heroTitle: "Mango â€” local trust infrastructure",
        heroSub: "Non-monetary, non-appropriable, anti-accumulation, anti-capture. Born on 02 Feb 2026.",
        sec1Title: "Do Mango now",
        sec1Text: "Mango comes from real exchanges between people. It is not money. It is not counted. It is not accumulated.",
        btnPrimoScambioTxt: "Make the first exchange",
        btnFAQTxt: "FAQ",
        sec2Title: "Write one line",
        sec2Text: "One line = recognition of a real exchange. No numbers, no value.",
        rigaLabel: "Describe the exchange (short, human, clear):",
        rigaPh: "Example: I helped carry groceries; in return I got a ride.",
        btnInviaTxt: "Send / Save",
        btnPulisciTxt: "Clear",
        metaHint: "Tip: press Enter to save.",
        btnApriArchivioTxt: "View saved lines",
        btnSvuotaArchivioTxt: "Clear archive",
        sec2Note: "Local save (phone/PC). For online submission, you need a backend or an external form.",
        sec3Title: "What is Mango",
        sec3Text: "Mango is a non-monetary local trust infrastructure: it recognizes real exchanges without turning them into quantity, value, or accumulation. Created by Juan de Dios Annaloro Mercedes in memory of his sister Larimar.",
        btnPDFTxt: "Official Foundational Document (Multilingual)",
        footerTxt: "Mango â€” born on 02 Feb 2026. Non-monetary, non-appropriable, anti-accumulation, anti-capture.",
        savedOk: "Saved âœ…",
        savedEmpty: "Write something before saving.",
        cleared: "Cleared.",
        archiveEmpty: "Archive is empty (no lines saved on this device).",
        confirmWipe: "Are you sure you want to delete ALL saved lines on this device?",
        wiped: "Archive deleted.",
        toastOk: "Line recognized",
        warnNumbers: "âš ï¸ Mango is not counted. Try to respect yourself."
      },
      es: {
        brandTitle: "Mango",
        heroTitle: "Mango â€” infraestructura local de confianza",
        heroSub: "No monetaria, no apropiable, anti-acumulaciÃ³n, anti-captura. Nacida el 02 feb 2026.",
        sec1Title: "Haz Mango ahora",
        sec1Text: "Mango nace de intercambios reales entre personas. No es dinero. No se cuenta. No se acumula.",
        btnPrimoScambioTxt: "Hacer el primer intercambio",
        btnFAQTxt: "FAQ",
        sec2Title: "Escribe una lÃ­nea",
        sec2Text: "Una lÃ­nea = reconocimiento de un intercambio real. Sin nÃºmeros, sin valor.",
        rigaLabel: "Describe el intercambio (breve, humano, claro):",
        rigaPh: "Ej: AyudÃ© con la compra; a cambio recibÃ­ un paseo.",
        btnInviaTxt: "Enviar / Guardar",
        btnPulisciTxt: "Limpiar",
        metaHint: "Consejo: pulsa Enter para guardar.",
        btnApriArchivioTxt: "Ver lÃ­neas guardadas",
        btnSvuotaArchivioTxt: "Vaciar archivo",
        sec2Note: "Guardado local (telÃ©fono/PC). Para enviar online necesitas backend o formulario externo.",
        sec3Title: "QuÃ© es Mango",
        sec3Text: "Mango es una infraestructura local de confianza no monetaria: reconoce intercambios reales sin convertirlos en cantidad, valor o acumulaciÃ³n. Creado por Juan de Dios Annaloro Mercedes en memoria de su hermana Larimar.",
        btnPDFTxt: "Documento Fundacional Oficial (MultilingÃ¼e)",
        footerTxt: "Mango â€” nacido el 02 feb 2026. No monetario, no apropiable, anti-acumulaciÃ³n, anti-captura.",
        savedOk: "Guardado âœ…",
        savedEmpty: "Escribe algo antes de guardar.",
        cleared: "Limpio.",
        archiveEmpty: "Archivo vacÃ­o (no hay lÃ­neas guardadas en este dispositivo).",
        confirmWipe: "Â¿Seguro que quieres borrar TODAS las lÃ­neas guardadas en este dispositivo?",
        wiped: "Archivo borrado.",
        toastOk: "LÃ­nea reconocida",
        warnNumbers: "âš ï¸ Mango no se cuenta. Intenta respetarte."
      },
      fr: {
        brandTitle: "Mango",
        heroTitle: "Mango â€” infrastructure locale de confiance",
        heroSub: "Non monÃ©taire, non appropriable, anti-accumulation, anti-capture. NÃ©e le 02 fÃ©v 2026.",
        sec1: "",
        sec1Title: "Fais Mango maintenant",
        sec1Text: "Mango naÃ®t dâ€™Ã©changes rÃ©els entre personnes. Ce nâ€™est pas de lâ€™argent. Ã‡a ne se compte pas. Ã‡a ne sâ€™accumule pas.",
        btnPrimoScambioTxt: "Faire le premier Ã©change",
        btnFAQTxt: "FAQ",
        sec2Title: "Ã‰cris une ligne",
        sec2Text: "Une ligne = reconnaissance dâ€™un Ã©change rÃ©el. Aucun chiffre, aucune valeur.",
        rigaLabel: "DÃ©cris lâ€™Ã©change (court, humain, clair) :",
        rigaPh: "Ex : Jâ€™ai aidÃ© Ã  porter les courses; en Ã©change jâ€™ai reÃ§u un trajet.",
        btnInviaTxt: "Envoyer / Enregistrer",
        btnPulisciTxt: "Effacer",
        metaHint: "Astuce : appuie sur EntrÃ©e pour enregistrer.",
        btnApriArchivioTxt: "Voir les lignes enregistrÃ©es",
        btnSvuotaArchivioTxt: "Vider lâ€™archive",
        sec2Note: "Enregistrement local (tÃ©lÃ©phone/PC). Pour lâ€™envoi en ligne, il faut un backend ou un formulaire externe.",
        sec3Title: "Quâ€™est-ce que Mango",
        sec3Text: "Mango est une infrastructure locale de confiance non monÃ©taire : elle reconnaÃ®t des Ã©changes rÃ©els sans les transformer en quantitÃ©, valeur ou accumulation. CrÃ©Ã©e par Juan de Dios Annaloro Mercedes en mÃ©moire de sa sÅ“ur Larimar.",
        btnPDFTxt: "Document Fondateur Officiel (Multilingue)",
        footerTxt: "Mango â€” nÃ© le 02 fÃ©v 2026. Non monÃ©taire, non appropriable, anti-accumulation, anti-capture.",
        savedOk: "EnregistrÃ© âœ…",
        savedEmpty: "Ã‰cris quelque chose avant dâ€™enregistrer.",
        cleared: "EffacÃ©.",
        archiveEmpty: "Archive vide (aucune ligne enregistrÃ©e sur cet appareil).",
        confirmWipe: "Es-tu sÃ»r de vouloir supprimer TOUTES les lignes enregistrÃ©es sur cet appareil ?",
        wiped: "Archive supprimÃ©e.",
        toastOk: "Ligne reconnue",
        warnNumbers: "âš ï¸ Mango ne se compte pas. Essaie de te respecter."
      },
      de: {
        brandTitle: "Mango",
        heroTitle: "Mango â€” lokale Vertrauens-Infrastruktur",
        heroSub: "Nicht monetÃ¤r, nicht aneignbar, anti-Akkumulation, anti-Capture. Geboren am 02. Feb 2026.",
        sec1Title: "Mach Mango jetzt",
        sec1Text: "Mango entsteht aus realen Austauschen zwischen Menschen. Es ist kein Geld. Es wird nicht gezÃ¤hlt. Es wird nicht angesammelt.",
        btnPrimoScambioTxt: "Ersten Austausch machen",
        btnFAQTxt: "FAQ",
        sec2Title: "Schreibe eine Zeile",
        sec2Text: "Eine Zeile = Anerkennung eines realen Austauschs. Keine Zahlen, kein Wert.",
        rigaLabel: "Beschreibe den Austausch (kurz, menschlich, klar):",
        rigaPh: "Bsp: Ich half beim Tragen; im Gegenzug bekam ich eine Mitfahrt.",
        btnInviaTxt: "Senden / Speichern",
        btnPulisciTxt: "Leeren",
        metaHint: "Tipp: DrÃ¼cke Enter zum Speichern.",
        btnApriArchivioTxt: "Gespeicherte Zeilen ansehen",
        btnSvuotaArchivioTxt: "Archiv leeren",
        sec2Note: "Lokales Speichern (Handy/PC). FÃ¼r Online-Senden brauchst du Backend oder externes Formular.",
        sec3Title: "Was ist Mango",
        sec3Text: "Mango ist eine nicht-monetÃ¤re lokale Vertrauens-Infrastruktur: Sie erkennt reale Austausche an, ohne sie in Menge, Wert oder Akkumulation zu verwandeln. Erschaffen von Juan de Dios Annaloro Mercedes im Gedenken an seine Schwester Larimar.",
        btnPDFTxt: "Offizielles GrÃ¼ndungsdokument (Mehrsprachig)",
        footerTxt: "Mango â€” geboren am 02. Feb 2026. Nicht monetÃ¤r, nicht aneignbar, anti-Akkumulation, anti-Capture.",
        savedOk: "Gespeichert âœ…",
        savedEmpty: "Schreibe etwas, bevor du speicherst.",
        cleared: "Geleert.",
        archiveEmpty: "Archiv ist leer (keine Zeilen auf diesem GerÃ¤t gespeichert).",
        confirmWipe: "Bist du sicher, dass du ALLE gespeicherten Zeilen auf diesem GerÃ¤t lÃ¶schen willst?",
        wiped: "Archiv gelÃ¶scht.",
        toastOk: "Zeile erkannt",
        warnNumbers: "âš ï¸ Mango wird nicht gezÃ¤hlt. Respektiere dich selbst."
      },
      zh: {
        brandTitle: "Mango",
        heroTitle: "Mango â€” æœ¬åœ°ä¿¡ä»»åŸºç¡€è®¾æ–½",
        heroSub: "éè´§å¸ã€ä¸å¯å æœ‰ã€åç§¯ç´¯ã€åæœºæ„ä¿˜è·ã€‚è¯ç”Ÿäº 2026 å¹´ 2 æœˆ 2 æ—¥ã€‚",
        sec1Title: "ç°åœ¨å°±åš Mango",
        sec1Text: "Mango æ¥è‡ªäººä¸äººä¹‹é—´çœŸå®äº¤æ¢ã€‚ä¸æ˜¯é’±ã€‚ä¸è®¡æ•°ã€‚ä¸ç§¯ç´¯ã€‚",
        btnPrimoScambioTxt: "è¿›è¡Œç¬¬ä¸€æ¬¡äº¤æ¢",
        btnFAQTxt: "å¸¸è§é—®é¢˜",
        sec2Title: "å†™ä¸€è¡Œ",
        sec2Text: "ä¸€è¡Œ = å¯¹ä¸€æ¬¡çœŸå®äº¤æ¢çš„è®¤å¯ã€‚æ²¡æœ‰æ•°å­—ï¼Œæ²¡æœ‰ä»·å€¼ã€‚",
        rigaLabel: "æè¿°è¿™æ¬¡äº¤æ¢ï¼ˆç®€çŸ­ã€äººæ€§ã€æ¸…æ¥šï¼‰ï¼š",
        rigaPh: "ä¾‹ï¼šæˆ‘å¸®å¿™æèœï¼›ä½œä¸ºäº¤æ¢æˆ‘å¾—åˆ°ä¸€æ¬¡é¡ºé£è½¦ã€‚",
        btnInviaTxt: "æäº¤ / ä¿å­˜",
        btnPulisciTxt: "æ¸…ç©º",
        metaHint: "æç¤ºï¼šæŒ‰å›è½¦ä¹Ÿå¯ä»¥ä¿å­˜ã€‚",
        btnApriArchivioTxt: "æŸ¥çœ‹å·²ä¿å­˜çš„è¡Œ",
        btnSvuotaArchivioTxt: "æ¸…ç©ºå­˜æ¡£",
        sec2Note: "æœ¬åœ°ä¿å­˜ï¼ˆæ‰‹æœº/ç”µè„‘ï¼‰ã€‚è‹¥è¦åœ¨çº¿æäº¤ï¼Œéœ€è¦åå°æˆ–å¤–éƒ¨è¡¨å•ã€‚",
        sec3Title: "ä»€ä¹ˆæ˜¯ Mango",
        sec3Text: "Mango æ˜¯ä¸€ç§éè´§å¸çš„æœ¬åœ°ä¿¡ä»»åŸºç¡€è®¾æ–½ï¼šå®ƒè®¤å¯çœŸå®äº¤æ¢ï¼Œä½†ä¸æŠŠå®ƒä»¬å˜æˆæ•°é‡ã€ä»·å€¼æˆ–ç§¯ç´¯ã€‚ç”± Juan de Dios Annaloro Mercedes åˆ›å»ºï¼Œä»¥çºªå¿µå…¶å¦¹å¦¹ Larimarã€‚",
        btnPDFTxt: "å®˜æ–¹å¥ åŸºæ–‡ä»¶ï¼ˆå¤šè¯­è¨€ï¼‰",
        footerTxt: "Mango â€” è¯ç”Ÿäº 2026 å¹´ 2 æœˆ 2 æ—¥ã€‚éè´§å¸ã€ä¸å¯å æœ‰ã€åç§¯ç´¯ã€åæœºæ„ä¿˜è·ã€‚",
        savedOk: "å·²ä¿å­˜ âœ…",
        savedEmpty: "è¯·å…ˆå†™ç‚¹å†…å®¹å†ä¿å­˜ã€‚",
        cleared: "å·²æ¸…ç©ºã€‚",
        archiveEmpty: "å­˜æ¡£ä¸ºç©ºï¼ˆæœ¬è®¾å¤‡æœªä¿å­˜ä»»ä½•è®°å½•ï¼‰ã€‚",
        confirmWipe: "ç¡®å®šè¦åˆ é™¤æœ¬è®¾å¤‡ä¸Šå·²ä¿å­˜çš„æ‰€æœ‰è®°å½•å—ï¼Ÿ",
        wiped: "å·²åˆ é™¤å­˜æ¡£ã€‚",
        toastOk: "å·²ç¡®è®¤è¿™ä¸€è¡Œ",
        warnNumbers: "âš ï¸ Mango ä¸è®¡æ•°ã€‚è¯·å°Šé‡è‡ªå·±ã€‚"
      }
    };

    function getLang() {
      const url = new URL(window.location.href);
      const q = (url.searchParams.get("lang") || "").toLowerCase().trim();
      if (STR[q]) return q;
      return "it";
    }
    function setLang(lang) {
      const url = new URL(window.location.href);
      url.searchParams.set("lang", lang);
      window.location.href = url.toString();
    }

    function applyLang(lang) {
      document.documentElement.lang = lang === "zh" ? "zh" : lang;
      const s = STR[lang];

      const map = {
        brandTitle: "brandTitle",
        heroTitle: "heroTitle",
        heroSub: "heroSub",
        sec1Title: "sec1Title",
        sec1Text: "sec1Text",
        btnPrimoScambioTxt: "btnPrimoScambioTxt",
        btnFAQTxt: "btnFAQTxt",
        sec2Title: "sec2Title",
        sec2Text: "sec2Text",
        rigaLabel: "rigaLabel",
        btnInviaTxt: "btnInviaTxt",
        btnPulisciTxt: "btnPulisciTxt",
        metaHint: "metaHint",
        btnApriArchivioTxt: "btnApriArchivioTxt",
        btnSvuotaArchivioTxt: "btnSvuotaArchivioTxt",
        sec2Note: "sec2Note",
        sec3Title: "sec3Title",
        sec3Text: "sec3Text",
        btnPDFTxt: "btnPDFTxt",
        footerTxt: "footerTxt",
      };
      Object.entries(map).forEach(([k, id]) => {
        const el = document.getElementById(id);
        if (el) el.textContent = s[k];
      });

      const ta = document.getElementById("riga");
      if (ta) ta.placeholder = s.rigaPh;

      document.querySelectorAll(".chip").forEach(ch => {
        ch.classList.toggle("active", ch.dataset.lang === lang);
      });

      // imposta testo base toast (poi cambia al volo su ok/warn)
      const toast = document.getElementById("toastBox");
      if (toast) toast.textContent = s.toastOk;
    }

    // -----------------------------
    // Registro unico (MIGRAZIONE + DEDUP)
    // -----------------------------
    const STORAGE_KEY = "MANGO_REGISTRO_UNICO_V1";
    const OLD_KEYS = [
      "mango_righe_v1",
      "MANGO_RIGHE_V1",
      "mangoRighe",
      "righeMango",
      "MANGO_RIGHE",
      "registroMango",
      "MANGO_REGISTRO",
      "MANGO_RIGHE_HOME",
      "MANGO_RIGHE_PRIMO"
    ];

    function safeParse(raw){ try { return JSON.parse(raw); } catch { return null; } }
    function normalizeText(t){ return String(t ?? "").replace(/\s+/g," ").trim(); }

    function asRow(x){
      if (typeof x === "string") {
        const text = normalizeText(x);
        return text ? { text, ts: new Date().toISOString() } : null;
      }
      if (x && typeof x === "object") {
        const text = normalizeText(x.text ?? x.riga ?? x.value ?? "");
        if (!text) return null;
        const ts = typeof x.ts === "string" && x.ts ? x.ts : new Date().toISOString();
        return { text, ts };
      }
      return null;
    }

    function dedup(arr){
      const seen = new Set();
      const out = [];
      for (const r of arr){
        const k = r.text.toLowerCase();
        if (seen.has(k)) continue;
        seen.add(k);
        out.push(r);
      }
      return out;
    }

    function readKey(key){
      const raw = localStorage.getItem(key);
      if (!raw) return [];
      const parsed = safeParse(raw);
      if (!parsed || !Array.isArray(parsed)) return [];
      return parsed.map(asRow).filter(Boolean);
    }
    function writeKey(key, arr){
      localStorage.setItem(key, JSON.stringify(arr));
    }

    function migrateOnce(){
      if (localStorage.getItem(STORAGE_KEY)) return;
      let merged = [];
      for (const k of OLD_KEYS) merged = merged.concat(readKey(k));
      merged = dedup(merged).sort((a,b)=>(Date.parse(a.ts)||0)-(Date.parse(b.ts)||0));
      writeKey(STORAGE_KEY, merged);
    }

    function readArchive(){ migrateOnce(); return readKey(STORAGE_KEY); }
    function writeArchive(arr){ migrateOnce(); writeKey(STORAGE_KEY, arr); }

    function updateCount(lang){
      const n = readArchive().length;
      const el = document.getElementById("metaCount");
      if (!el) return;
      const t = {
        it: `${n} righe salvate su questo dispositivo`,
        en: `${n} lines saved on this device`,
        es: `${n} lÃ­neas guardadas en este dispositivo`,
        fr: `${n} lignes enregistrÃ©es sur cet appareil`,
        de: `${n} Zeilen auf diesem GerÃ¤t gespeichert`,
        zh: `æœ¬è®¾å¤‡å·²ä¿å­˜ ${n} æ¡è®°å½•`
      };
      el.textContent = (t[lang] || t.it);
    }

    function showStatus(msg, tone){
      const box = document.getElementById("statusBox");
      if (!box) return;

      // reset
      box.style.borderColor = "";
      box.style.color = "";

      if (tone === "warn") {
        box.style.borderColor = "#ef4444";
        box.style.color = "#ef4444";
      }

      box.textContent = msg;
      box.classList.add("show");
      clearTimeout(window.__mangoStatusT);
      window.__mangoStatusT = setTimeout(() => box.classList.remove("show"), 3500);
    }

    function showToast(type, lang){
      const t = document.getElementById("toastBox");
      if (!t) return;

      t.classList.remove("good","warn");
      t.textContent = (type === "warn") ? STR[lang].warnNumbers : STR[lang].toastOk;
      t.classList.add(type === "warn" ? "warn" : "good");

      t.classList.add("show");
      clearTimeout(window.__mangoToastT);
      window.__mangoToastT = setTimeout(() => t.classList.remove("show"), 2400);
    }

    function saveLine(lang){
      const ta = document.getElementById("riga");
      if (!ta) return;

      const text = normalizeText(ta.value);
      if (!text){
        showStatus(STR[lang].savedEmpty);
        return;
      }

      // âš ï¸ BLOCCO NUMERI (avviso rosso + toast rosso)
      if (/[0-9]/.test(text)){
        showStatus(STR[lang].warnNumbers, "warn");
        showToast("warn", lang);
        return; // non salva
      }

      const arr = readArchive();
      const merged = dedup([{ text, ts: new Date().toISOString() }, ...arr]);

      writeArchive(merged);
      ta.value = "";
      updateCount(lang);

      showStatus(STR[lang].savedOk);
      showToast("ok", lang); // toast verde
    }

    function openArchive(lang){
      const arr = readArchive();
      if (!arr.length){
        showStatus(STR[lang].archiveEmpty);
        return;
      }
      const lines = arr.slice(0,30)
        .map((x,i)=>`${i+1}. ${x.text}  (${new Date(x.ts).toLocaleString()})`)
        .join("\n\n");
      alert(lines + (arr.length>30 ? `\n\nâ€¦ +${arr.length-30}` : ""));
    }

    function wipeArchive(lang){
      if (!confirm(STR[lang].confirmWipe)) return;
      writeArchive([]);
      updateCount(lang);
      showStatus(STR[lang].wiped);
    }

    // Init
    const lang = getLang();
    applyLang(lang);
    updateCount(lang);

    document.querySelectorAll(".chip").forEach(ch=>{
      ch.addEventListener("click", ()=> setLang(ch.dataset.lang));
    });

    document.getElementById("btnInvia")?.addEventListener("click", ()=> saveLine(lang));
    document.getElementById("btnPulisci")?.addEventListener("click", ()=>{
      const ta = document.getElementById("riga");
      if (ta) ta.value = "";
      showStatus(STR[lang].cleared);
    });
    document.getElementById("btnApriArchivio")?.addEventListener("click", ()=> openArchive(lang));
    document.getElementById("btnSvuotaArchivio")?.addEventListener("click", ()=> wipeArchive(lang));

    document.getElementById("riga")?.addEventListener("keydown", (e)=>{
      if (
        (e.key === "Enter" && (e.ctrlKey || e.metaKey)) ||
        (e.key === "Enter" && e.shiftKey === false && (e.target.value || "").length > 0 && window.innerWidth > 700)
      ){
        e.preventDefault();
        saveLine(lang);
      }
    });
  </script>
  
<p style="text-align:center; font-size:0.9em;">
  <a href="mailto:press@mangoinfrastruttura.org">
    press@mangoinfrastruttura.org
  </a>
</p>
  <script src="muro-mango.js?v=2"></script>
</body>
</html>
