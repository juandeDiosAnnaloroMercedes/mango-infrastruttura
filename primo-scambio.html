<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mango ‚Äî Scrivi una riga</title>

  <style>
    :root{--bg:#fff;--fg:#111;--muted:#6b7280;--card:#f6f7f9;--border:#e5e7eb;--shadow:0 10px 30px rgba(0,0,0,.06);--r:18px;--max:860px;--p:18px;--font:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;}
    body{margin:0;font-family:var(--font);background:var(--bg);color:var(--fg)}
    header{position:sticky;top:0;background:rgba(255,255,255,.92);backdrop-filter:blur(8px);border-bottom:1px solid var(--border);z-index:10}
    .hwrap{max-width:var(--max);margin:0 auto;padding:14px var(--p);display:flex;justify-content:space-between;align-items:center;gap:12px}
    .brand{font-weight:900;font-size:22px;display:flex;gap:10px;align-items:center}
    .lang{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end}
    .chip{border:1px solid var(--border);background:#fff;border-radius:999px;padding:10px 14px;font-weight:800;font-size:14px;cursor:pointer}
    .chip[aria-current="true"]{outline:2px solid #111;outline-offset:2px}
    .wrap{max-width:var(--max);margin:0 auto;padding:22px var(--p) 42px}
    h1{margin:0;font-size:22px;line-height:1.2}
    p{color:var(--muted);line-height:1.55}
    .grid{display:grid;grid-template-columns:1fr;gap:14px;margin-top:18px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:16px;box-shadow:var(--shadow)}
    .card h2{margin:0 0 10px;font-size:18px;color:#111}
    .card p,.card li{color:#1f2937;font-size:15px;line-height:1.55}
    ul{margin:10px 0 0 18px}
    .btnrow{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .btn{border:0;background:#111;color:#fff;padding:12px 14px;border-radius:14px;font-weight:900;cursor:pointer;text-decoration:none;display:inline-flex;align-items:center;gap:8px}
    .btn.secondary{background:#fff;color:#111;border:1px solid var(--border)}
    .small{font-size:13px;color:var(--muted)}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}
    textarea{
      width:100%;min-height:132px;resize:vertical;
      border:1px solid var(--border);border-radius:14px;
      padding:12px;background:#fff;font-size:16px;line-height:1.35;color:#111;
      box-shadow:inset 0 1px 0 rgba(0,0,0,.02);
    }
    .status{margin-top:10px}
    .badge{
      display:inline-block;padding:8px 10px;border-radius:999px;
      background:#fff;border:1px solid var(--border);
      color:#111;font-weight:800;font-size:13px;
    }
    .eq{font-weight:950;font-size:18px;color:#111;margin:10px 0 0}
  </style>
</head>

<body>
<header id="top">
  <div class="hwrap">
    <div class="brand">Mango ü•≠</div>
    <nav class="lang" aria-label="Lingue">
      <button class="chip" data-lang="it">IT</button>
      <button class="chip" data-lang="en">EN</button>
      <button class="chip" data-lang="es">ES</button>
      <button class="chip" data-lang="fr">FR</button>
      <button class="chip" data-lang="de">DE</button>
      <button class="chip" data-lang="zh">‰∏≠Êñá</button>
    </nav>
  </div>
</header>

<main class="wrap">
  <section>
    <h1 id="t_title"></h1>
    <p id="t_subtitle"></p>
    <div class="eq" id="t_eq"></div>
  </section>

  <section class="grid">
    <article class="card">
      <h2 id="t_how_title"></h2>
      <p id="t_how_text"></p>
      <ul>
        <li id="t_li1"></li>
        <li id="t_li2"></li>
        <li id="t_li3"></li>
      </ul>
      <p class="small" id="t_note"></p>
    </article>

    <article class="card">
      <h2 id="t_write_title"></h2>
      <p id="t_write_text"></p>

      <textarea id="line" placeholder=""></textarea>

      <div class="btnrow">
        <button class="btn" id="btn_copy">üìã <span id="t_btn_copy"></span></button>
        <button class="btn secondary" id="btn_send_local">üì• <span id="t_btn_send"></span></button>
      </div>

      <div class="status">
        <span class="badge" id="status_badge" style="display:none;"></span>
      </div>

      <div class="btnrow" style="margin-top:14px;">
        <a class="btn secondary" id="btn_home" href="index.html">üè† <span id="t_btn_home"></span></a>
        <a class="btn secondary" id="btn_register" href="index.html#register">üìú <span id="t_btn_register"></span></a>
      </div>

      <p class="small" id="t_privacy"></p>
    </article>
  </section>
</main>

<script>
  const SUPPORTED=["it","en","es","fr","de","zh"];
  const DEFAULT_LANG="it";
  const STORE_KEY="mango_register_lines_v1";

  const T={
    it:{
      title:"Scrivi una riga (reale).",
      subtitle:"Qui non si registra un valore: si riconosce un gesto accaduto. Una riga, umana e semplice.",
      eq:"Una riga = ü•≠",
      how_title:"Come deve essere la riga",
      how_text:"Una riga descrive lo scambio reale. Niente contabilit√†. Niente punteggi.",
      li1:"Non inserire quantit√†, prezzi, numeri o equivalenze.",
      li2:"Descrivi l‚Äôazione reale (chi, cosa, quando) in modo sobrio.",
      li3:"Se √® sbilanciato, non √® debito: √® visibile e curabile.",
      note:"Se vuoi, usa solo nomi di battesimo o iniziali. La privacy √® parte della cura.",
      write_title:"Scrivi adesso",
      write_text:"Scrivi qui sotto. Poi copia. Se vuoi, inviala al Registro (qui).",
      placeholder:"Scrivi qui la tua riga‚Ä¶",
      btn_copy:"Copia la riga",
      btn_send:"Invia al Registro",
      btn_home:"Torna alla Home",
      btn_register:"Vai al Registro",
      privacy:"Mango non chiede dati obbligatori. Scrivi solo ci√≤ che vuoi rendere pubblico.",
      copied:"Copiato.",
      saved:"Salvata nel Registro (qui).",
      empty:"Scrivi prima una riga."
    },
    en:{
      title:"Write one (real) line.",
      subtitle:"No ‚Äúvalue‚Äù is recorded here: a real gesture is recognized. One single, human line.",
      eq:"One line = ü•≠",
      how_title:"How the line must be",
      how_text:"A line describes a real exchange. No accounting. No scoring.",
      li1:"No quantities, prices, numbers, or equivalences.",
      li2:"Describe the real action (who, what, when) soberly.",
      li3:"If unbalanced, it‚Äôs not debt: visible and care-able.",
      note:"If you want, use first names or initials. Privacy is part of care.",
      write_title:"Write now",
      write_text:"Write below. Then copy. If you want, send it to the Register (here).",
      placeholder:"Write your line here‚Ä¶",
      btn_copy:"Copy the line",
      btn_send:"Send to Register",
      btn_home:"Back to Home",
      btn_register:"Go to Register",
      privacy:"Mango requires no mandatory personal data. Write only what you want to be public.",
      copied:"Copied.",
      saved:"Saved in the Register (here).",
      empty:"Write a line first."
    },
    es:{
      title:"Escribe una l√≠nea (real).",
      subtitle:"Aqu√≠ no se registra ‚Äúvalor‚Äù: se reconoce un gesto ocurrido. Una sola l√≠nea, humana y simple.",
      eq:"Una l√≠nea = ü•≠",
      how_title:"C√≥mo debe ser la l√≠nea",
      how_text:"Una l√≠nea describe el intercambio real. Sin contabilidad. Sin puntuaciones.",
      li1:"Sin cantidades, precios, n√∫meros ni equivalencias.",
      li2:"Describe la acci√≥n real (qui√©n, qu√©, cu√°ndo) con sobriedad.",
      li3:"Si es desequilibrado, no es deuda: visible y cuidable.",
      note:"Si quieres, usa nombres o iniciales. La privacidad es parte del cuidado.",
      write_title:"Escribe ahora",
      write_text:"Escribe abajo. Luego copia. Si quieres, env√≠ala al Registro (aqu√≠).",
      placeholder:"Escribe tu l√≠nea aqu√≠‚Ä¶",
      btn_copy:"Copiar la l√≠nea",
      btn_send:"Enviar al Registro",
      btn_home:"Inicio",
      btn_register:"Ir al Registro",
      privacy:"Mango no pide datos obligatorios. Escribe solo lo que quieras hacer p√∫blico.",
      copied:"Copiado.",
      saved:"Guardada en el Registro (aqu√≠).",
      empty:"Primero escribe una l√≠nea."
    },
    fr:{
      title:"√âcris une ligne (r√©elle).",
      subtitle:"Ici on ne ‚Äúregistre‚Äù pas une valeur : on reconna√Æt un geste arriv√©. Une seule ligne, humaine et simple.",
      eq:"Une ligne = ü•≠",
      how_title:"Comment doit √™tre la ligne",
      how_text:"Une ligne d√©crit l‚Äô√©change r√©el. Pas de comptabilit√©. Pas de score.",
      li1:"Aucune quantit√©/prix/chiffre/√©quivalence.",
      li2:"D√©crire l‚Äôaction r√©elle (qui, quoi, quand) sobrement.",
      li3:"D√©s√©quilibre ‚â† dette : visible et soignable.",
      note:"Si tu veux, utilise des pr√©noms ou des initiales. La confidentialit√© fait partie du soin.",
      write_title:"√âcris maintenant",
      write_text:"√âcris ci-dessous. Puis copie. Si tu veux, envoie-la au Registre (ici).",
      placeholder:"√âcris ta ligne ici‚Ä¶",
      btn_copy:"Copier la ligne",
      btn_send:"Envoyer au Registre",
      btn_home:"Accueil",
      btn_register:"Aller au Registre",
      privacy:"Mango ne demande aucune donn√©e obligatoire. √âcris seulement ce que tu veux rendre public.",
      copied:"Copi√©.",
      saved:"Enregistr√©e dans le Registre (ici).",
      empty:"√âcris d‚Äôabord une ligne."
    },
    de:{
      title:"Schreib eine (echte) Zeile.",
      subtitle:"Hier wird kein ‚ÄûWert‚Äú erfasst: Eine reale Geste wird anerkannt. Eine einzige, menschliche Zeile.",
      eq:"Eine Zeile = ü•≠",
      how_title:"Wie die Zeile sein soll",
      how_text:"Eine Zeile beschreibt den realen Austausch. Keine Buchhaltung. Keine Punkte.",
      li1:"Keine Mengen/Preise/Zahlen/√Ñquivalenzen.",
      li2:"Beschreibe die reale Handlung (wer, was, wann) n√ºchtern.",
      li3:"Ungleichgewicht ‚â† Schuld: sichtbar und pflegbar.",
      note:"Wenn du willst, nutze Vornamen oder Initialen. Privatsph√§re ist Teil der F√ºrsorge.",
      write_title:"Jetzt schreiben",
      write_text:"Schreib unten. Dann kopiere. Wenn du willst, ins Register (hier) senden.",
      placeholder:"Schreib deine Zeile hier‚Ä¶",
      btn_copy:"Zeile kopieren",
      btn_send:"Ins Register senden",
      btn_home:"Startseite",
      btn_register:"Zum Register",
      privacy:"Mango verlangt keine Pflichtdaten. Schreib nur, was du √∂ffentlich machen willst.",
      copied:"Kopiert.",
      saved:"Im Register (hier) gespeichert.",
      empty:"Schreib zuerst eine Zeile."
    },
    zh:{
      title:"ÂÜô‰∏ã‰∏ÄË°åÔºàÁúüÂÆûÁöÑÔºâ„ÄÇ",
      subtitle:"ËøôÈáå‰∏çÁôªËÆ∞‚ÄúÊï∞ÂÄº‚ÄùÔºåËÄåÊòØÊâøËÆ§ÁúüÂÆûÂèëÁîüÁöÑÂä®‰Ωú„ÄÇ‰∏ÄË°åÔºå‰øùÊåÅ‰∫∫ÊÄß‰∏éÁÆÄÊ¥Å„ÄÇ",
      eq:"‰∏ÄË°å = ü•≠",
      how_title:"Ëøô‰∏ÄË°åÂ∫îÂΩìÊÄéÊ†∑ÂÜô",
      how_text:"‰∏ÄË°åÊèèËø∞ÁúüÂÆû‰∫§Êç¢Ôºö‰∏çËÆ∞Ë¥¶„ÄÅ‰∏çÊâìÂàÜ„ÄÇ",
      li1:"‰∏çË¶ÅÂÜôÊï∞Èáè/‰ª∑Ê†º/Êï∞Â≠ó/Á≠â‰ª∑Êç¢ÁÆó„ÄÇ",
      li2:"Áî®ÂÖãÂà∂ÊñπÂºèÂÜôÊ∏ÖÊ•öÔºàË∞Å„ÄÅÂÅö‰∫Ü‰ªÄ‰πà„ÄÅ‰ΩïÊó∂Ôºâ„ÄÇ",
      li3:"‰∏çÂπ≥Ë°° ‚â† ÂÄ∫ÔºöÂèØËßÅ„ÄÅÂèØË¢´ÁÖßÈ°æ„ÄÇ",
      note:"Â¶ÇÈúÄÈöêÁßÅÔºåÂèØÁî®ÊòµÁß∞ÊàñÈ¶ñÂ≠óÊØç„ÄÇÈöêÁßÅ‰πüÊòØÁÖßÈ°æÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇ",
      write_title:"Áé∞Âú®ÂÜô",
      write_text:"Âú®‰∏ãÈù¢ÂÜô„ÄÇÁÑ∂ÂêéÂ§çÂà∂„ÄÇÂ¶ÇÊÑøÊÑèÔºåÂèëÈÄÅÂà∞ÁôªËÆ∞ÂÜåÔºàËøôÈáåÔºâ„ÄÇ",
      placeholder:"Âú®ËøôÈáåÂÜô‰∏ã‰Ω†ÁöÑËøô‰∏ÄË°å‚Ä¶",
      btn_copy:"Â§çÂà∂Ëøô‰∏ÄË°å",
      btn_send:"ÂèëÈÄÅÂà∞ÁôªËÆ∞ÂÜå",
      btn_home:"ÂõûÂà∞È¶ñÈ°µ",
      btn_register:"ËøõÂÖ•ÁôªËÆ∞ÂÜå",
      privacy:"Mango ‰∏çË¶ÅÊ±ÇÂøÖÈ°ªÁöÑ‰∏™‰∫∫‰ø°ÊÅØ„ÄÇÂè™ÂÜô‰Ω†ÊÑøÊÑèÂÖ¨ÂºÄÁöÑÂÜÖÂÆπ„ÄÇ",
      copied:"Â∑≤Â§çÂà∂„ÄÇ",
      saved:"Â∑≤‰øùÂ≠òÂà∞ÁôªËÆ∞ÂÜåÔºàËøôÈáåÔºâ„ÄÇ",
      empty:"ËØ∑ÂÖàÂÜô‰∏ÄË°å„ÄÇ"
    }
  };

  function getLang(){
    const u=new URL(location.href);
    const l=(u.searchParams.get("lang")||"").toLowerCase();
    return SUPPORTED.includes(l)?l:DEFAULT_LANG;
  }
  function setLang(l){
    const u=new URL(location.href);
    u.searchParams.set("lang",l);
    history.replaceState({}, "", u.toString());
  }

  function badge(msg){
    const b=document.getElementById("status_badge");
    b.textContent=msg;
    b.style.display="inline-block";
    clearTimeout(window.__bto);
    window.__bto=setTimeout(()=>{b.style.display="none";}, 1400);
  }

  function saveToLocalRegister(line){
    let arr=[];
    try{ arr=JSON.parse(localStorage.getItem(STORE_KEY)||"[]"); }catch(e){ arr=[]; }
    arr.push({ t: Date.now(), line: line });
    localStorage.setItem(STORE_KEY, JSON.stringify(arr));
  }

  function apply(l){
    document.documentElement.lang=l;
    document.querySelectorAll(".chip").forEach(b=>b.setAttribute("aria-current", b.dataset.lang===l ? "true":"false"));
    const d=T[l]||T[DEFAULT_LANG];

    const map={
      t_title:d.title,t_subtitle:d.subtitle,t_eq:d.eq,
      t_how_title:d.how_title,t_how_text:d.how_text,
      t_li1:d.li1,t_li2:d.li2,t_li3:d.li3,t_note:d.note,
      t_write_title:d.write_title,t_write_text:d.write_text,
      t_btn_copy:d.btn_copy,t_btn_send:d.btn_send,
      t_btn_home:d.btn_home,t_btn_register:d.btn_register,
      t_privacy:d.privacy
    };
    Object.keys(map).forEach(id=>{const el=document.getElementById(id); if(el) el.textContent=map[id];});

    document.getElementById("line").placeholder=d.placeholder;

    document.getElementById("btn_home").href="index.html?lang="+l;
    document.getElementById("btn_register").href="index.html?lang="+l+"#register";
  }

  document.querySelectorAll(".chip").forEach(b=>b.addEventListener("click", ()=>{
    setLang(b.dataset.lang);
    apply(b.dataset.lang);
  }));

  document.getElementById("btn_copy").addEventListener("click", async ()=>{
    const l=getLang();
    const d=T[l]||T[DEFAULT_LANG];
    const v=(document.getElementById("line").value||"").trim();
    if(!v){ badge(d.empty); return; }
    try{ await navigator.clipboard.writeText(v); badge(d.copied); }
    catch(e){ badge(d.copied); }
  });

  document.getElementById("btn_send_local").addEventListener("click", ()=>{
    const l=getLang();
    const d=T[l]||T[DEFAULT_LANG];
    const v=(document.getElementById("line").value||"").trim();
    if(!v){ badge(d.empty); return; }
    saveToLocalRegister(v);

badge("‚úî Questa riga √® stata riconosciuta. Non √® un credito. Non √® un saldo.");

setTimeout(()=>{
  location.href="index.html?lang="+l+"#register";
}, 1200);
  
  

  apply(getLang());
</script>

</body>
</html>
